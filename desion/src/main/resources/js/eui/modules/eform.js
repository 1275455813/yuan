define(["eui/modules/ecommonctrls","eui/modules/ecombobox","eui/modules/ealmanac"],function(h,e,k){var w="componentObj";var d=h.EFormCheckBox,g=h.EFormCheckBoxGroup,t=h.EFormSpinner,v=h.EFormSearch,j=h.EFormUpload,r=h.EFormRange,f=h.ETextEditor,n=h.ETextArea,o=h.EButton,c=h.EFormComponent,q=e.EListCombobox,l=e.EEditCombobox,p=k.ECalendarCombobox,s=k.EMenologyCombobox,a=k.EQuarterCombobox,m=k.EAlmanacCombobox,i=k.ETimerCombobox;var b=new u();function u(){}u.TYPE_TAG={"text":"input","password":"input","checkbox":"input","radio":"input","switch":"input","time":"input","date":"input","month":"input","year":"input","quarter":"input","search":"input","file":"input","spinner":"input","range":"input","textarea":"textarea","texteditor":"textarea","img":"img","select":"select","button":"button"};u.prototype.render=function(B){if(!B){return;}var x=[];if($(B).hasClass("eui-form")){x[0]=B;}else{x=$(B).find(".eui-form");}var z={};if(x&&x.length>0){for(var C=0,E=x.length;C<E;C++){var A=x[C];var F=$(A).attr("type");if("checkbox"===F||"radio"===F){var y=$(A).attr("name");if(y){var D=z[y]||[];D.push(A);z[y]=D;continue;}}var G=this.renderElement(A);if(G){$(A).replaceWith(G);}}}if(!EUI.isEmptyObject(z)){for(y in z){var D=z[y];if(D.length==1){var A=D[0];var G=this.renderElement(A);if(G){$(A).replaceWith(G);}}else{this.renderCheckBoxGroupElement(D);}}}};u.prototype.renderCheckBoxGroupElement=function(y){if(!y||y.length==0){return;}var z={};var B=y[0].parentNode;z.parentElement=B;z.type=$(y[0]).attr("type");var C=[];for(var A=0,x=y.length;A<x;A++){var D=this.getAllAttributes(y[A]);C.push(D);$(y[A]).remove();}z.data=C;if(z.type==="checkbox"){this.checkboxGroup(z);}else{this.radioGroup(z);}};u.prototype.renderElement=function(y){var H;if(this.checkTagname(y)){var A=this.getAllAttributes(y);var z=EUI.getWndOfDom(y);A["wnd"]=z;var G=$(y).attr("type");if("select"===G){var E=[];var D=$(y).find("option");if(D.length>0){for(var B=0,F=D.length;B<F;B++){var x=D[B];var C={};C["caption"]=$(x).text();if(A.onlytext==="true"){C["value"]=C["caption"];}else{C["value"]=$(x).attr("value");}E.push(C);}}A.options=E;H=this.combobox(A);}else{if("switch"===G){H=this.switchButton(A);}else{if(this[G]){A.eui_value=$(y).text();H=this[G](A);}}}if(H){A["wnd"]=undefined;this.margeAttributes(A,H);}}return H;};u.prototype.checkTagname=function(y){if(!y){return false;}var x=$(y).attr("type");if(!x){return false;}var z=u.TYPE_TAG[x];if(!z){return false;}if($(y).is(z)){return true;}else{EUI.showMessage("标签"+y+"格式配置不合法！");}return false;};u.prototype.getAllAttributes=function(C){if(!C){return;}var E={};var A=C.attributes;if(A&&A.length>0){for(var B=0,y=A.length;B<y;B++){var x=A[B];var z=x["name"];var D=x["value"];E[z]=D;}}return E;};u.prototype.margeAttributes=function(y,A){if(!y||!A){return;}var z=this.getAllAttributes(A);var x=EUI.extendObj(y,z);$(A).attr(x);};u.prototype.text=function(x){x=x||{};x.type="text";var y=x?x["class"]:"";x["class"]=(y?y+" eui-form-input":"eui-form-input")+(EUI.parseBool(x.disabled,false)?" eui-disabled":"");var z=$("<input>").attr(x);return z[0];};u.prototype.password=function(x){x=x||{};x.type="password";var y=x?x["class"]:"";x["class"]=(y?y+" eui-form-password":"eui-form-password")+(EUI.parseBool(x.disabled,false)?" eui-disabled":"");var z=$("<input>").attr(x);return z[0];};u.prototype.textarea=function(x){x=x||{};x.value=x["value"]||x["eui_value"];var y=new n(x);var z=y.getContainer();$(z).data(w,y);return z;};u.prototype.texteditor=function(x){x=x||{};x.value=x["value"]||x["eui_value"];var y=new f(x);var z=y.getBaseDom();$(z).data(w,y);return z;};u.prototype.checkbox=function(x){x=x||{};x.type="checkbox";var y=new d(x);var z=y.getBaseDom();$(z).data(w,y);return z;};u.prototype.radio=function(x){x=x||{};x.type="radio";var y=new d(x);var z=y.getBaseDom();$(z).data(w,y);return z;};u.prototype.switchButton=function(x){x=x||{};x.type="switch";var y=new d(x);var z=y.getBaseDom();$(z).data(w,y);return z;};u.prototype.checkboxGroup=function(x){x=x||{};x.type="checkbox";var y=new g(x);var z=y.getBaseDom();$(z).data(w,y);return z;};u.prototype.radioGroup=function(x){x=x||{};x.type="radio";var y=new g(x);var z=y.getBaseDom();$(z).data(w,y);return z;};u.prototype.combobox=function(x){x=x||{};x.showFilter=EUI.parseBool(x.showFilter,false);x.showCheckAll=EUI.parseBool(x.showCheckAll,false);x.floatBasecss="eui-panel-selectlist";x.datas=x["options"];var y;if(x.isedit){y=new l(x);}else{y=new q(x);}var z=y.getDom();$(z).data(w,y);return z;};u.prototype.time=function(x){x=x||{};if(!i){i=require("eui/modules/ealmanac").ETimerCombobox;}var y=new i(x);var z=y.getDom();$(z).data(w,y);return z;};u.prototype.date=function(x){x=x||{};if(!p){p=require("eui/modules/ealmanac").ECalendarCombobox;}var y=new p(x);var z=y.getDom();$(z).data(w,y);return z;};u.prototype.month=function(x){x=x||{};if(!s){s=require("eui/modules/ealmanac").EMenologyCombobox;}var y=new s(x);var z=y.getDom();$(z).data(w,y);return z;};u.prototype.year=function(x){x=x||{};if(!m){m=require("eui/modules/ealmanac").EAlmanacCombobox;}var y=new m(x);var z=y.getDom();$(z).data(w,y);return z;};u.prototype.quarter=function(x){x=x||{};if(!a){a=require("eui/modules/ealmanac").EQuarterCombobox;}var y=new a(x);var z=y.getDom();$(z).data(w,y);return z;};u.prototype.spinner=function(x){x=x||{};var y=new t(x);var z=y.getBaseDom();$(z).data(w,y);return z;};u.prototype.img=function(x){x=x||{};x.type="img";var y=x["class"];x["class"]=y?y+" eui-form-img":"eui-form-img";var z=$("<img>");$(z).attr(x);return z[0];};u.prototype.button=function(x){x=x||{};var y=new o(x);var z=y.getContainer();$(z).data(w,y);return z;};u.prototype.search=function(x){x=x||{};var y=new v(x);var z=y.getBaseDom();$(z).data(w,y);return z;};u.prototype.file=function(x){x=x||{};var y=new j(x);var z=y.getBaseDom();$(z).data(w,y);return z;};u.prototype.range=function(x){x=x||{};var y=new r(x);var z=y.getBaseDom();$(z).data(w,y);return z;};u.prototype.form=function(x){x=x||{};var y=new c(x);var z=y.getBaseDom();$(z).data(w,y);return z;};u.prototype.getComponentObjByDom=function(x){if(!x){return;}return $(x).data(w)||x;};u.prototype.getValueByDom=function(y){if(!y){return;}var x=$(y).data(w);if(x){return x.getValue();}return y.value;};u.prototype.setDisabled=function(z,x){var y=$(z).data(w);if(y){y.setDisabled(x);}else{x=EUI.parseBool(x,false);if(x){z.setAttribute("disabled",true);EUI.addClassName(z,"eui-disabled");}else{z.removeAttribute("disabled");EUI.removeClassName(z,"eui-disabled");}}};return{eform:b};});