define(["eui/modules/uibase"],function(j){var m=EUI.parseBool;var r=EUI.browser;var i=j.EComponent;var n=EUI.browser.isMobile;function l(s){i.call(this,s);this.isHighlight=m(s["isHighlight"],false);this.caption=s["caption"]||"按钮";this._initButton();this.setHasArrow(s["isArrow"]);if(s.disabled){this.setDisabled(true);}if(s.icon){this.setImg(s.icon);}this.setMenuItems(s["menus"]);this.addBaseCss(s.baseCss);this.setOnClick(s.onclick,s.onclickArgs);}l.create=function(s){return new l(s);};EUI.extendClass(l,i,"EButton");l.prototype.dispose=function(){this.isHighlight=null;this.caption=null;this.isArrow=null;this.onclick=null;this.onclickArgs=null;if(this.popupmenu){this.menus=null;this.popupmenu.dispose();this.popupmenu=null;}$(this.basedom).unbind("click.default");i.prototype.dispose.call(this);};l.prototype._initButton=function(){this.basedom=this.doc.createElement("div");this.basedom.className="eui-btn eui-btn-menu "+(this.isHighlight?"eui-btn-primary":"");this.basedom.innerHTML="<i class='eui-icon eui-hide'></i><span></span><i class='eui-icon eui-icon-arrow2'></i>";if(this.width){this.basedom.style.width=EUI.toPerNumber(this.width);}if(this.parentElement){this.parentElement.appendChild(this.basedom);}this.beforeIcon=this.basedom.firstChild;this.buttonCaption=this.beforeIcon.nextSibling;this.afterIcon=this.buttonCaption.nextSibling;this.setCaption(this.caption);var s=this;$(this.basedom).bind("click.default",function(t){if(s.isDisabled()){return;}var u=t.target;if(u==s.afterIcon&&s.popupmenu){s.popupmenu.popupDownAt(s.afterIcon);return;}s.__doCustomEvent(s.onclick,[s,s.onclickArgs]);});};l.prototype.setMenuItems=function(w){if(!w||this.menus==w||!EUI.isArray(w)){return;}if(this.popupmenu){this.popupmenu.clear();}else{var t=require("eui/modules/emenu");this.popupmenu=new t.EPopupMenu({wnd:this.wnd});}for(var u=0,s=w.length;u<s;u++){var x=w[u];var v=this.popupmenu.addMenuItem(x.caption,x.icon,x.onclick);if(x.name){v.setName(x.name);}}this.menus=w;EUI.removeClassName(this.basedom,"eui-btn-menu");EUI.addClassName(this.basedom,"eui-btn-popmenu");};l.prototype.getPopupMenu=function(){return this.popupmenu?this.popupmenu:null;};l.prototype.setCaption=function(s){this.caption=s?s:"";var t=this.caption?this.caption.replace(/( |　)/g," "):this.caption;this.buttonCaption.innerHTML=t;};l.prototype.getCaption=function(){return this.caption;};l.prototype.setOnClick=function(s,t){this.onclick=s;this.onclickArgs=t;};l.prototype.getContainer=function(){return this.basedom;};l.prototype.getBaseDom=l.prototype.getContainer;l.prototype.setImg=function(s,t){s?EUI.removeClassName(this.beforeIcon,"eui-hide"):EUI.addClassName(this.beforeIcon,"eui-hide");EUI.setTagIcon(this.beforeIcon,s);if(typeof(t)=="string"&&t.length>0){this.beforeIcon.title=t;}};l.prototype.setHasArrow=function(t,s){t=m(t,false);this.isArrow=t;this.afterIcon.style.display=t?"":"none";if(s){this.afterIcon.backgroundImage="url("+s+")";}};l.prototype.show=function(){this.setVisible(true);};l.prototype.hide=function(){this.setVisible(false);};l.prototype.setWidth=function(s){this.basedom.style.width=EUI.toPerNumber(s);};function e(s){s["height"]=s["height"]||120;i.call(this,s);this.width=EUI.toPerNumber(this.width);this._initTextEditor();this.lineNumberVisible(s["islinenumbervisible"]);this.setValue(s["value"]||"");if(s.disabled){this.setDisabled(true);}}EUI.extendClass(e,i,"ETextEditor");e.prototype.dispose=function(){if(this.editContainer){this.editContainer.___TextEditor_Object=null;this.editContainer.onkeydown=null;this.editContainer.onscroll=null;this.removeEventListener();}i.prototype.dispose.call(this);};e.prototype.getBaseDom=function(){return this.container;};e.prototype._initTextEditor=function(){this.container=this.parentElement.appendChild(this.doc.createElement("div"));this.container.className="eui-form-texteditor";this.basedom=this.container;this.container.style.cssText+=";width:"+this.width+"; height:"+this.height+";";this.numberCell=this.container.appendChild(this.doc.createElement("div"));this.numberCell.className="eui-form-texteditor-listnumber";this.editCell=this.container.appendChild(this.doc.createElement("div"));this.editCell.className="eui-form-texteditor-textarea";this.numberContainer=this.numberCell.appendChild(this.doc.createElement("div"));this.numberContainer.className="eui-form-texteditor-listnumber-container";this._number=this.numberContainer.appendChild(this.doc.createElement("div"));this._number.className="eui-form-texteditor-number";EUI.setTextContent(this._number,1);for(this.enterCount=2;this.enterCount<=200;this.enterCount++){EUI.setTextContent(this.numberContainer.appendChild(this._number.cloneNode(false)),this.enterCount);}this.editContainer=this.editCell.appendChild(this.doc.createElement("textarea"));this.editContainer.wrap="off";if(r.isFirefox||r.isChrome){this.numberCell.style.width="36px";}this.editContainer.___TextEditor_Object=this;this.editContainer.onscroll=this._func_TextEditor_onscroll.bind(this);this.editContainer.onkeydown=this._func_TextEditor_onkeydown.bind(this);var s=this;this.__listenerObjectFunction=function(v){if(s.isDisabled()){return;}var u=EUI.getTarget(s.wnd,v);var t=u.value;if(!t){s.scrollTo();}};this.addEventListener();};e.prototype.setDisabled=function(t){e._superClass.prototype.setDisabled.call(this,t);var s=this.isDisabled();if(s){this.editContainer.setAttribute("disabled","true");}else{this.editContainer.removeAttribute("disabled");}};e.prototype._func_TextEditor_onscroll=function(s){if(this.isDisabled()){return;}this.scrollTo(this.editContainer.scrollTop);};e.prototype._func_TextEditor_onkeydown=function(y){if(this.isDisabled()){return;}var B=this;if(!y){y=B.wnd.event;}if(y.keyCode==13){EUI.setTextContent(B.numberContainer.appendChild(B._number.cloneNode(false)),B.enterCount++);}else{if(y.keyCode==8){if(B.enterCount==2){return;}if(B.numberContainer.lastChild){B.enterCount--;B.numberContainer.removeChild(B.numberContainer.lastChild);}}else{if(y.keyCode==9){var s=0,u=0,x=null,A=0;if(typeof(this.editContainer.selectionStart)=="number"){s=this.editContainer.selectionStart;u=this.editContainer.selectionEnd;}else{if(B.doc.selection){x=B.doc.selection.createRange();if(x.parentElement().id==this.editContainer.id){var v=B.doc.body.createTextRange();v.moveToElementText(this.editContainer);for(s=0;v.compareEndPoints("StartToStart",x)<0;s++){v.moveStart("character",1);}for(var w=0;w<=s;w++){if(this.editContainer.value.charAt(w)=="\n"){s++;A++;}}v=B.doc.body.createTextRange();v.moveToElementText(this.editContainer);for(u=0;v.compareEndPoints("StartToEnd",x)<0;u++){v.moveStart("character",1);}for(w=0;w<=u;w++){if(this.editContainer.value.charAt(w)=="\n"){u++;}}}}}var t=this.editContainer.value.substring(0,s);var z=this.editContainer.value.substring(u);this.editContainer.value=t+"\t"+z;if(x){x.moveStart("character",s+1-A);if(s!=this.editContainer.value.length-1){x.collapse(true.editContainer);x.select();}}else{if(this.editContainer.setSelectionRange){this.editContainer.setSelectionRange(s+1,s+1);}}return false;}}}};e.prototype.getScrollTop=function(){return this.editContainer.scrollTop;};e.prototype.getScrollLeft=function(){return this.editContainer.scrollLeft;};e.prototype.scrollTo=function(s){this.numberCell.scrollTop=typeof(s)=="number"?s:0;};e.prototype.lineNumberVisible=function(s){s=m(s,false);this.numberCell.style.display=s?"":"none";this.editCell.style.left=s?"36px":"0";};e.prototype.setValue=function(s){this.editContainer.scrollTop=0;this.editContainer.scrollLeft=0;this.editContainer.value=s;};e.prototype.getValue=function(){return this.editContainer.value;};e.prototype.removeEventListener=function(){if(this.__listenerObjectFunction){if(this.editContainer.detachEvent){this.editContainer.detachEvent("onpropertychange",this.__listenerObjectFunction);}if(this.editContainer.removeEventListener){this.editContainer.removeEventListener("input",this.__listenerObjectFunction,false);}this.__listenerObjectFunction=null;}};e.prototype.addEventListener=function(){if(this.editContainer.attachEvent){this.editContainer.attachEvent("onpropertychange",this.__listenerObjectFunction);}if(this.editContainer.addEventListener){this.editContainer.addEventListener("input",this.__listenerObjectFunction,false);}};e.prototype.readOnly=function(s){if(typeof(s)!="boolean"){s=false;}this.editContainer.style.color=s?"#787878":"";this.editContainer.readOnly=s;};function k(s){i.call(this,s);this._initTextArea();this.setValue(s["value"]||"");if(s.disabled){this.setDisabled(true);}}EUI.extendClass(k,i,"ETextArea");k.prototype.dispose=function(){if(this.textarea){this.setRecordCursorPos(false);this.textarea=null;}i.prototype.dispose.call(this);};k.prototype.setDisabled=function(t){k._superClass.prototype.setDisabled.call(this,t);var s=this.isDisabled();if(s){this.textarea.setAttribute("disabled","true");}else{this.textarea.removeAttribute("disabled");}};k.prototype.getContainer=function(){return this.textarea;};k.prototype.getBaseDom=k.prototype.getContainer;k.prototype.getValue=function(){var s=this.textarea.value;return s?s:"";};k.prototype.setValue=function(s){if(!s){s="";}this.textarea.value=s;};k.prototype.setFocus=function(){try{this.textarea.focus();}catch(s){}};k.prototype.focus=k.prototype.setFocus;k.prototype.getTextAreaDom=function(){return this.textarea;};k.prototype._initTextArea=function(){this.textarea=this.parentElement.appendChild(this.doc.createElement("textarea"));this.textarea.className="eui-form-textarea";this.basedom=this.textarea;if(this.width){this.setWidth(this.width);}if(this.height){this.setHeight(this.height);}};k.prototype.setRecordCursorPos=function(s){if((s&&this._haveAttechEvent)||(!s&&!this._haveAttechEvent)){return;}if(!this._eventSavePos_bind){this._eventSavePos_bind=this._eventSavePos.bind(this);}this._haveAttechEvent=s;var u=["keydown","keyup","mousedown"];for(var t=0;t<u.length;t++){if(s){EUI.addEvent(this.textarea,u[t],this._eventSavePos_bind,false);}else{EUI.removeEvent(this.textarea,u[t],this._eventSavePos_bind,false);}}};k.prototype.getSelectionStart=function(){return this.textarea._selectionStart;};k.prototype.getSelectionEnd=function(){return this.textarea._selectionEnd;};k.prototype.replaceValue=function(s,x,u){var y=this.textarea;var w=y.value;var v=w.substr(0,s);var t=w.substr(x);y.value=v+u+t;this.textarea._selectionStart=v.length+u.length;this.textarea._selectionEnd=this.textarea._selectionStart;EUI.setCursorPosition(y,this.textarea._selectionStart);};k.prototype.insertValue=function(s){if(!s){return;}EUI.insertAtCursor(this.textarea,s);};k.prototype.appendValue=function(s){if(s){this.textarea.value+=s;}};k.prototype._eventSavePos=function(x){x=x||this.wnd.event;if(x.type==="mousedown"){EUI.addEvent(this.doc.body,"mouseup",this._eventSavePos_bind,false);}else{if(x.type==="mouseup"){EUI.removeEvent(this.doc.body,"mouseup",this._eventSavePos_bind,false);}}var y=this.textarea;if(typeof(y.selectionStart)=="number"){y._selectionStart=y.selectionStart;y._selectionEnd=y.selectionEnd;return;}if(document.selection){var z=0;var s=0;var w=y.value;var t=document.selection.createRange();if(t.parentElement()==y){var u=document.body.createTextRange();u.moveToElementText(y);for(z=0;u.compareEndPoints("StartToStart",t)<0;z++){u.moveStart("character",1);}for(var v=0;v<=z;v++){if(w.charAt(v)=="\n"){z++;}}var u=document.body.createTextRange();u.moveToElementText(y);for(s=0;u.compareEndPoints("StartToEnd",t)<0;s++){u.moveStart("character",1);}for(var v=0;v<=s;v++){if(w.charAt(v)=="\n"){s++;}}}y._selectionStart=z;y._selectionEnd=s;}};k.prototype.setWrap=function(s){s=typeof(s)=="boolean"?s:true;this.textarea.setAttribute("wrap",s?"soft":"off");};function g(v,t,w,u,s){i.call(this,{wnd:v,parentElement:s});this.type=u?u.toLowerCase():"checkbox";this.id="__Checkbox_"+(Math.floor(Math.random()*9999));this.name=t?t:this.id;this.value=w?w:"true";this._initCheckbox();if(options.disabled){this.setDisabled(true);}}EUI.extendClass(g,i,"ECheckbox");g.prototype.dispose=function(){this.__userdata=null;this.wnd.__Checkbox_current=null;this._ipt._sancomponent=null;this.container.onclick=null;g._superClass.prototype.dispose.call(this);};g.prototype._initCheckbox=function(){this.disabled=false;this.checked=false;this.isIndeterminate=false;this.container=this.doc.createElement("img");this.basedom=this.container;if(this.parentElement){this.parentElement.appendChild(this.container);}this.container.align="absmiddle";this.container.border=0;this.container.src=EUI.xuiimg("null.gif");this.container.className=(this.isCheckbox()?"unchecked":"radioUnchecked");this._ipt=this.doc.createElement("input");this._ipt.setAttribute("type",this.type);this._ipt.setAttribute("name",this.name);this._ipt.setAttribute("id",this.id);this._ipt.value=this.value;if(this.parentElement){this.parentElement.appendChild(this._ipt);}this._ipt.style.cssText+=";display:none; width:1px; height:1px; overflow:hidden";this.container.onclick=this._onClickEvent.bind(this);this._ipt._sancomponent=this;};g.prototype._onClickEvent=function(s){if(this.isDisabled()){return;}this.setChecked(!this.checked);if(typeof(this.onclick)=="function"){this.onclick(this,this.checked);}};g.prototype.getBaseDom=function(){return this.container;};g.prototype.getName=function(){return this.name;};g.prototype.setDisabled=function(s){if(typeof(s)!="boolean"){s=false;}this.disabled=s;this._ipt.disabled=s;this.container.className=(this.isIndeterminate&&this.checked?(s?"disabledIndeterminate":"indeterminate"):this.checked?(s?(this.isCheckbox()?"disabledChecked":"disabledRadioChecked"):(this.isCheckbox()?"checked":"radioChecked")):(s?(this.isCheckbox()?"disabledUnchecked":"disabledRadioUnchecked"):(this.isCheckbox()?"unchecked":"radioUnchecked")));};g.prototype.isDisabled=function(){return this.disabled;};g.prototype.setChecked=function(v,w){if(typeof(w)!="boolean"){w=false;}if(typeof(v)!="boolean"){v=false;}if(!this.isCheckbox()&&this.checked&&!v&&!w){return;}if(!this.isCheckbox()){var u=this.doc.getElementsByName(this.name);var t;for(var s=0;s<u.length;s++){t=u[s];if(v&&t._sancomponent&&t._sancomponent.checked){t._sancomponent.setChecked(false,true);}}}this.checked=v;this.container.className=v?(this.disabled?(this.isIndeterminate?"disabledIndeterminate":(this.isCheckbox()?"disabledChecked":"disabledRadioChecked")):(this.isIndeterminate?"indeterminate":(this.isCheckbox()?"checked":"radioChecked"))):(this.disabled?(this.isCheckbox()?"disabledUnchecked":"disabledRadioUnchecked"):(this.isCheckbox()?"unchecked":"radioUnchecked"));this._ipt.checked=v;if(!w&&!this.isCheckbox()){this.wnd.__Checkbox_current=this;}};g.prototype.setIndeterminate=function(s){if(typeof(s)!="boolean"){s=false;}this.isIndeterminate=s;this.setChecked(s);};g.prototype.isCheckbox=function(){return this.type=="checkbox";};g.prototype.removeIt=function(){this.parentElement.removeChild(this.container);this.dispose();};function d(s){i.call(this,s);this._initLink();if(s.disabled){this.setDisabled(true);}if(s.caption){this.setCaption(s.caption||I18N.getString("xui.ctrls.xcommonctrls.js.2","点击这里"));}if(s.icon){this.setIcon(s.icon);}if(s.hint){this.setHint(s.hint);}this._onClick=s.onclick;}EUI.extendClass(d,i,"ELink");d.prototype.dispose=function(){this._onClick=null;this._link.onclick=null;this._link=null;i.prototype.dispose.call(this);};d.prototype.getBaseDom=function(){return this._link;};d.prototype._initLink=function(){var s=this;this._link=this.getDocument().createElement("button");this._link.type="button";this.basedom=this._link;this._link.className="eui-btn eui-btn-text";this._link.style.cssText+="padding: 0px;";this.icondom=this._link.appendChild(this.getDocument().createElement("i"));this.icondom.className="eui-icon eui-hide";this.captionNode=this._link.appendChild(this.getDocument().createTextNode(""));this._link.onclick=function(){if(s.isDisabled()){return;}if(typeof(s._onClick)=="function"){s._onClick(s);}};if(this.getParentElement()){this.getParentElement().appendChild(this._link);}};d.prototype.setHint=function(s){this._link.setAttribute("title",(s||""));};d.prototype.setIcon=function(s){if(s){EUI.removeClassName(this.icondom,"eui-hide");EUI.setTagIcon(this.icondom,s);}else{EUI.addClassName(this.icondom,"eui-hide");}};d.prototype.setColor=function(s){this._link.style.color=s;};d.prototype.setUnderline=function(s){this._link.style.textDecoration=s?"underline":"none";};d.prototype.setCaption=function(s){this.caption=s||"";EUI.setTextContent(this.captionNode,s);};d.prototype.getCaption=function(s){return this.caption;};d.prototype.setOnClick=function(s){this._onClick=s;};d.prototype.setDisabled=function(s){d._superClass.prototype.setDisabled.call(this,s);if(this.isDisabled()){this._link.setAttribute("disabled",true);}else{this._link.removeAttribute("disabled");}};function a(s){i.call(this,s);this.width=EUI.toPerNumber(this.width);this.height=a.BROWSERHEIGHT;this.value="";this.isMulti=m(s["isMulti"],true);this._initEditButton();if(s.disabled){this.setDisabled(true);}}a.BROWSERHEIGHT="20px";EUI.extendClass(a,i,"EditBrowser");a.prototype.dispose=function(){if(this._hef){this._hef.dispose();this._hef=null;}if(this._iconObj){this._iconObj._userdata=null;this._iconObj.onload=null;this._iconObj=null;}this.domedit=null;this.dombt=null;this.value=null;i.prototype.dispose.call(this);};a.prototype._initEditButton=function(){this.container=this.cbar=this.doc.createElement("table");this.container.style.cssText+="; border: 1px solid #d8d9dd; background: #FFF; border-collapse: collapse; table-layout: fixed; width: "+this.width+"; height: "+this.height;var w=this.cbar.insertRow(-1);this.icon=w.insertCell(-1);this.icon.style.cssText+="; width: 1px; height: 100%; white-space: nowrap; word-wrap: normal; text-align: center; vertical-align: middle; padding: 0;";var v=w.insertCell(-1);v.style.cssText+="; height: 100%; white-space: nowrap; word-wrap: normal; text-align: center; vertical-align: middle; padding: 0;";v.style.height="100%";var u=v.appendChild(this.doc.createElement("div"));u.style.position="relative";u.style.width="100%";u.style.height="100%";u.style.display="block";u.style.textAlign="left";u.style.overflow="hidden";var s=u.appendChild(this.doc.createElement("div"));s.style.cssText+="; position: absolute; width: 100%; height: 18px; display: block; text-align: left; overflow: hidden;";var t=w.insertCell(-1);t.style.cssText+="; width: 18px; height: 100%; white-space: nowrap; word-wrap: normal; text-align: center; vertical-align: middle; line-height: 0; padding-left: 0;";this._hef=new EUI.HtmlElementFactory(this.wnd);this.domedit=this.isMulti?this._hef.textarea():this._hef.edit();this.domedit.style.cssText+="; width: 100%; height: 100%; margin: 0; padding: 0 4px; border: none; vertical-align: top; overflow: hidden; background: #FFF;";s.appendChild(this.domedit);this.dombt=this._hef.button("");this.dombt.style.cursor="pointer";this.dombt.className="morebt2";t.appendChild(this.dombt);if(this.getParentElement()){this.getParentElement().appendChild(this.cbar);}};a.prototype.setIconStyle=function(s){this.dombt.className=s||"morebt2";};a.prototype.setCssStyle=function(u){var w=i.prototype.setCssStyle.call(this,u);if(!w||w.size()==0){return;}var v=w.get("background-image");if(v){this.dombt.style.backgroundImage=v;}var t=w.get("background");if(t){this.dombt.style.background=t;}var s=w.get("border");if(s){this.setBorder(s);}};a.prototype.getBaseDom=function(){return this.cbar;};a.prototype.getButton=function(){return this.dombt;};a.prototype.getEdit=function(){return this.domedit;};a.prototype.setValue=function(s){this.domedit.value=s?s:"";};a.prototype.getValue=function(){return this.domedit.value;};a.prototype.readOnly=function(s){this.domedit.readOnly=s||false;};a.prototype.setDisabled=function(s){s=s||false;this.cbar.disabled=s;this.domedit.setDisabled(s);this.dombt.setDisabled(s);this.dombt.className=s?"morebt2_disable":"morebt2";};a.prototype.setFocus=function(){if(this.domedit.readOnly){return;}try{this.domedit.focus();}catch(s){}};a.prototype.setIcon=function(s){if(!s){return;}if(!this._iconObj){this._iconObj=new Image();}this._iconObj.onload=function(){this._userdata.icon.style.background="url("+this.src+") no-repeat center center";this._userdata.icon.style.width=Math.max(this.width,16)+"px";this._userdata.icon.style.height=this.height+"px";if(isCSS1Compat){this._userdata.icon.style.paddingRight="16px";}};this._iconObj._userdata=this;this._iconObj.src=s;};a.prototype.setButtonIcon=function(s,t){if(s){this.dombt.style.backgroundImage="url("+s+")";}if(t){this.dombt.title=t;}};a.prototype.setButtonVisible=function(v){if(typeof(v)!="boolean"){v=false;}var u=v?"":"none";var t=this.dombt.parentNode;if(t.style.display!=u){t.style.display=u;}};a.prototype.setBorder=function(s){this.cbar.style.border=s;};function c(t){i.call(this,t);this.parentElement=t["parentElement"];this.basedom=null;this.caption=null;this.ischecked=false;this.userObj=null;this.type=t["type"]||"checkbox";this.value=t["value"];this.istextleft=m(t["istextleft"],false);this.icon=t["icon"];this._initEFormCheckBox();this.addBaseCss(t["basecss"]);if(EUI.parseBool(t.isvert,false)){this.addBaseCss("eui-block");}var s=t["caption"]||"";this.setCaption(s);var u=m(t["ischecked"],false);this.setChecked(u);if(t.disabled){this.setDisabled(true);}this.onclick=t["onclick"];}EUI.extendClass(c,i,"EFormCheckBox");c.prototype.dispose=function(){$(this.basedom).unbind("click.default");this.caption=null;this.ischecked=null;this.userObj=null;this.type=null;i.prototype.dispose.call(this);};c.prototype._initEFormCheckBox=function(){this.basedom=this.doc.createElement("div");var t=(this.type=="checkbox")?"eui-form-checkbox":(this.type=="radio"?"eui-form-radio":"eui-form-switch");this.basedom.className="eui-unselect "+t;this.basedom.innerHTML="<i class='eui-icon "+(r.isie?"":"eui-anim")+"'></i><i class='eui-icon'></i>"+"<span "+(this.istextleft?"class ='eui-float-left'":"")+"></span>";if(this.parentElement){this.parentElement.appendChild(this.basedom);}this.icondom=this.basedom.firstChild.nextSibling;this.spandom=this.icondom.nextSibling;this.setIcon(this.icon);var s=this;$(this.basedom).bind("click.default",function(){if(s.isDisabled()){return;}var u=s.ischecked;if(s.type==="radio"&&u){return;}s.setChecked(!u);});};c.prototype.setIcon=function(s){if(s){EUI.setTagIcon(this.icondom,s);EUI.removeClassName(this.icondom,"eui-hide");if(this.istextleft){EUI.addClassName(this.icondom,"eui-float-left");}}else{EUI.addClassName(this.icondom,"eui-hide");}};c.prototype.getBaseDom=function(){return this.basedom;};c.prototype.setChecked=function(t,s){this.ischecked=m(t,false);if(this.type=="switch"){this.ischecked?$(this.basedom).addClass("eui-form-onswitch"):$(this.basedom).removeClass("eui-form-onswitch");}else{var u=this.basedom.firstChild;var v=r.isie?"":"eui-anim-scalespring";$(u).addClass(this.ischecked?(v+" eui-form-checked"):"eui-form-checkbox");$(u).removeClass(this.ischecked?"eui-form-checkbox":(v+" eui-form-checked"));}if(m(s,true)){this.__doCustomEvent(this.onclick,[this,this.ischecked]);}};c.prototype.isChecked=function(){return this.ischecked;};c.prototype.setCaption=function(s){this.spandom.innerHTML=s||"";if(s){EUI.removeClassName(this.spandom,"eui-hide");}else{EUI.addClassName(this.spandom,"eui-hide");}};c.prototype.getCaption=function(){return $(this.basedom).children("span").text();};c.prototype.setUserObj=function(s){this.userObj=s;};c.prototype.getUserObj=function(){return this.userObj;};c.prototype.getValue=function(){var s=null;if(this.value!==undefined&&this.value!==null){s=this.ischecked?this.value:null;}else{s=this.ischecked?true:false;}return s;};c.prototype.setValue=function(t,s){if(EUI.isBoolean(t)){this.setChecked(t,s);}else{this.value=t;}};c.prototype.setOnClick=function(s){this.onclick=s;};function f(s){i.call(this,s);this.basedom=s["parentElement"];this.type=s["type"]||"checkbox";this.data=s["data"];this.objects=[];this.selecteds=[];this.separator=s.separator||"|";this.isvert=EUI.parseBool(s.isvert,false);this._initEFormCheckBoxGroup();if(s.disable){this.setDisabled(s.disable);}if(s.value){this.setValue(s.value);}this.onclick=s["onclick"];}EUI.extendClass(f,i,"EFormCheckBoxGroup");f.prototype.dispose=function(){this.type=null;this.data=null;this.objects=null;this.selecteds=null;i.prototype.dispose.call(this);};f.prototype._initEFormCheckBoxGroup=function(){if(!this.data){return;}if(!this.basedom){this.basedom=this.doc.createElement("div");}for(var s=0;s<this.data.length;s++){var u=this.data[s];u.type=this.type;var t=this.createCheckBox(u);$(this.basedom).append(t.getBaseDom());this.objects.push(t);}};f.prototype.browseRows=function(s){if(!EUI.isFunction(s)){return;}var t=this.objects;if(t&&t.length>0){t.forEach(function(v,u){s.call(null,v,u);});}};f.prototype.getBaseDom=function(){return this.basedom;};f.prototype.createCheckBox=function(u){var s=this;if(u.isvert===undefined){u.isvert=this.isvert;}var t=new c(u);t.setOnClick(function(x,y,v){if(s.type=="checkbox"){if(x.isChecked()){s.selecteds.push(x);}else{s.selecteds.remove(x);}}else{if(s.selecteds.length==1){var w=s.selecteds[0];if(w!=x){w.setChecked(false,false);}}s.selecteds.clear();s.selecteds.push(x);}v=EUI.parseBool(v,false);if(v){return;}s.__doCustomEvent(s.onclick,[s,s.getValue()]);});if(t.isChecked()){t.onclick(t,true,true);}return t;};f.prototype.setDisabled=function(u){f._superClass.prototype.setDisabled.call(this,u);var t=this.isDisabled(),w=this.objects;for(var v=0,s=w.length;v<s;v++){w[v]&&w[v].setDisabled(t);}};f.prototype.removeCheckBox=function(u){if(u instanceof c){u=this.objects.indexOf(u);}var t=this.objects[u];if(t){$(t.getBaseDom()).remove();t.dispose();this.objects.splice(u,1);var s=this.selecteds.indexOf(t);if(s!=-1){this.selecteds.splice(s,1);}}};f.prototype.getValue=function(){var v="";if(this.type==="radio"){var u=this.selecteds[0];if(u){v=u.getValue();}}else{for(var t=0,s=this.selecteds.length;t<s;t++){v+=this.selecteds[t].getValue()+this.separator;}v=v.ensureNotEndWith(this.separator);}return v;};f.prototype.setValue=function(x){for(var u=0,t=this.selecteds.length;u<t;u++){this.selecteds[u].setChecked(false,false);}this.selecteds=[];x=x+"";if(x){var v=this.type==="radio",s=v?[x]:x.split(this.separator);for(var u=0,t=this.objects.length;u<t;u++){var w=this.objects[u];var y=w.value;if(s.indexOf(y)!=-1){w.setChecked(true,false);this.selecteds.push(w);if(v){break;}}}}};f.prototype.setOnClick=function(s){this.onclick=s;};function p(s){i.call(this,s);this.parentElement=s["parentElement"];this.width=EUI.toPerNumber(s["width"]||66);this.maxData=parseInt(s["maxdata"]||100,10);this.minData=parseInt(s["mindata"]||0);this.runStep=parseInt(s["runstep"]||1);this.enableFloat=EUI.parseBool(s["enablefloat"],true);this.basedom=null;this.edit=null;this.icondom=null;this._initEFormSpinner();this.setValue(s["value"]||this.minData);if(s.disabled){this.setDisabled(s.disabled);}this.onvaluechange=s["onvaluechange"];}EUI.extendClass(p,i,"EFormSpinner");p.prototype.dispose=function(){$(this.icondom).unbind("click.default");$(this.edit).unbind("blur.default");this.onvaluechange=null;this.edit=null;this.icondom=null;this.width=null;this.maxData=null;this.minData=null;this.runStep=null;this.enableFloat=null;i.prototype.dispose.call(this);};p.prototype._initEFormSpinner=function(){this.basedom=this.doc.createElement("div");this.basedom.className="eui-form-spinner";this.basedom.style.width=this.width;this.basedom.innerHTML="<input type='text'><div class='eui-form-spinner-btn'><i class='eui-icon eui-form-spinner-up'></i><i class='eui-icon eui-form-spinner-down'></i></div>";if(this.parentElement){this.parentElement.appendChild(this.basedom);}this.edit=this.basedom.firstChild;this.icondom=this.edit.nextSibling;var s=this;$(this.icondom).bind("click.default",function(t){if(s.isDisabled()){return;}s.run(t);});$(this.edit).bind("blur.default",function(){if(s.isDisabled()){return;}s.blur();});};p.prototype.getBaseDom=function(){return this.basedom;};p.prototype.run=function(s){var u=parseFloat(this.edit.value,10);if(isNaN(u)){u=this.minData;}var t=EUI.getTarget(this.wnd,s);if($(t).hasClass("eui-form-spinner-up")){u+=this.runStep;}else{if($(t).hasClass("eui-form-spinner-down")){u-=this.runStep;}else{return;}}if(u>this.maxData){u=this.maxData;}if(u<this.minData){u=this.minData;}this.edit.value=u;this.__doCustomEvent(this.onvaluechange,[this,u]);};p.prototype.blur=function(s){var t=parseFloat(this.edit.value,10);if(isNaN(t)){t=this.minData;}else{if(t>this.maxData){t=this.maxData;}if(t<this.minData){t=this.minData;}}this.edit.value=t;if(m(s,true)){this.__doCustomEvent(this.onvaluechange,[this,t]);}};p.prototype.getValue=function(){this.blur(false);var s=parseFloat(this.edit.value,10);return isNaN(s)?"":s;};p.prototype.setValue=function(s){s=parseFloat(s,10);this.edit.value=isNaN(s)?"":s;};p.prototype.setMax=function(s){s=parseFloat(s,10);this.maxData=isNaN(s)?100:s;};p.prototype.getMax=function(){return this.maxData;};p.prototype.setMin=function(s){s=parseFloat(s,10);this.minData=isNaN(s)?0:s;};p.prototype.getMin=function(){return this.minData;};p.prototype.setRunStep=function(s){s=parseFloat(s,10);this.runStep=isNaN(s)?1:s;};p.prototype.setDisabled=function(s){p._superClass.prototype.setDisabled.call(this,s);if(this.isDisabled()){this.edit.setAttribute("disabled","true");}else{this.edit.removeAttribute("disabled");}};p.prototype.readOnly=function(s){s=EUI.parseBool(s,false);if(this.edit.readOnly!=s){this.edit.readOnly=s;this.edit.onselectstart=s?EUI.returnfalse:null;}};p.prototype.setOnValueChange=function(s){this.onvaluechange=s;};function q(s){i.call(this,s);this.width=EUI.toPerNumber(s["width"]||200);this.parentElement=s["parentElement"];this.needprocess=m(s["needprocess"],false);this.disableenter=m(s["disableenter"],false);this.icon=s["icon"]||"";this.ismulti=m(s["ismulti"],false);this.basedom=null;this.searching=false;this.onsearch=s["onsearch"];this.onstop=s["onstop"];this.onclear=s["onclear"];this.emptySearch=EUI.parseBool(s["emptySearch"],false);this._initEFormSearch();this.setShowClearText(s["showClearText"]);this.addBaseCss(s.baseCss);if(s.disabled){this.setDisabled(s.disabled);}this.readOnly(s.readOnly);this.setHint(s.hint);}EUI.extendClass(q,i,"EFormSearch");q.prototype.dispose=function(s){$(this.icondom).unbind("click.default");$(this.edit).unbind("keypress.default focus.default blur.default input.default");$(this.clearTextDom).unbind("mousedown.default");this.disableenter=null;this.needprocess=null;this.icondom=null;this.searching=null;this.onsearch=null;this.onclear=null;this.onstop=null;this.width=null;i.prototype.dispose.call(this);};q.prototype._initEFormSearch=function(){this.basedom=this.doc.createElement("div");this.basedom.className="eui-form-search";var t=this.ismulti?"<textarea></textarea>":"<input type='text'>";this.basedom.innerHTML=t+"<i class='eui-icon eui-icon-cleartext eui-hide'>&#xef7b;</i><i class='eui-icon eui-icon-search'></i>";this.basedom.style.width=EUI.toPerNumber(this.width);if(this.parentElement){this.parentElement.appendChild(this.basedom);}this.edit=this.basedom.firstChild;if(this.ismulti){EUI.addClassName(this.basedom,"eui-form-search-textarea");}this.clearTextDom=this.edit.nextSibling;this.icondom=this.clearTextDom.nextSibling;if(this.icon){this.setIcon(this.icon);}var s=this;$(this.icondom).bind("click.default",function(u){if(s.isDisabled()){return;}if(s.searching){s.stop(u);}else{var v=s.edit.value;if(s.emptySearch!==true&&!v.trim()){return;}s.search(u);}});$(this.clearTextDom).bind("mousedown.default",function(){s.setValue("");s._isdoClearTetx=true;});if(!this.disableenter){$(this.edit).bind("keypress.default",function(u){if(s.isDisabled()){return;}if(u.keyCode=="13"){var v=s.edit.value;if(s.emptySearch!==true&&!v.trim()){return;}s.search(u);if(EUI.browser.isie){s.edit.blur();}}});}$(this.edit).bind("input.default",function(u){s.doShowClearText();}).bind("focus.default",function(){EUI.addClassName(s.basedom,"eui-form-search-focus");s.doShowClearText();}).bind("blur.default",function(u){EUI.removeClassName(s.basedom,"eui-form-search-focus");if(s.edit.value){EUI.addClassName(s.basedom,"eui-form-search-value");}else{EUI.removeClassName(s.basedom,"eui-form-search-value");}if(s._isdoClearTetx){s._isdoClearTetx=undefined;s.edit.focus();}else{s.doShowClearText(true);}});};q.prototype.search=function(s){if(this.needprocess){this.setSearchState(true);}var t=this.edit.value;this.__doCustomEvent(this.onsearch,[this,t]);};q.prototype.stop=function(s){if(this.needprocess){this.setSearchState(false);}var t=this.edit.value;this.__doCustomEvent(this.onstop,[this,t]);};q.prototype.getValue=function(){return this.edit.value;};q.prototype.setValue=function(s){this.edit.value=s;};q.prototype.getMult=function(){return this.ismulti;};q.prototype.setShowClearText=function(s){this.showClearText=EUI.parseBool(s,true);if(this.showClearText){EUI.removeClassName(this.basedom,"eui-form-nosearch-focus");}else{EUI.addClassName(this.basedom,"eui-form-nosearch-focus");}};q.prototype.doShowClearText=function(u){if(!this.showClearText){return;}var t=this.getValue(),s=t.length;if(!u&&s>0){EUI.removeClassName(this.clearTextDom,"eui-hide");EUI.removeClassName(this.basedom,"eui-form-nosearch-focus");}else{EUI.addClassName(this.clearTextDom,"eui-hide");EUI.addClassName(this.basedom,"eui-form-nosearch-focus");}if(this.onclear&&EUI.isFunction(this.onclear)){this.onclear(this,t);}};q.prototype.setDisabled=function(s){q._superClass.prototype.setDisabled.call(this,s);if(this.isDisabled()){this.edit.setAttribute("disabled","true");}else{this.edit.removeAttribute("disabled");}};q.prototype.setIcon=function(t){if(!t){return;}var s=this.icondom;EUI.removeClassName(s,"eui-icon-search");EUI.setTagIcon(s,t);};q.prototype.setHint=function(s){if(!s){return;}this.edit.setAttribute("placeholder",s);};q.prototype.getBaseDom=function(){return this.basedom;};q.prototype.getIconDom=function(){return this.icondom;};q.prototype.setOnSearch=function(s){this.onsearch=s;};q.prototype.setOnStop=function(s){this.onstop=s;};q.prototype.setOnClear=function(s){this.onclear=s;};q.prototype.setSearchState=function(s){s=m(s,false);if(s){$(this.basedom).addClass("eui-form-search-loading");this.searching=true;}else{$(this.basedom).removeClass("eui-form-search-loading");this.searching=false;}};q.prototype.readOnly=function(s){this.edit.readOnly=m(s,false);};function h(s){i.call(this,s);this.parentElement=s["parentElement"];this.basedom=null;this.name=s["name"]||"uploadfile";this._initEFormUpload();this.addBaseCss(s.baseCss);if(s.disabled){this.setDisabled(s.disabled);}}EUI.extendClass(h,i,"EFormUpload");h.prototype.dispose=function(s){this.file.unbind("change");i.prototype.dispose.call(this);};h.prototype._initEFormUpload=function(){this.basedom=this.doc.createElement("div");this.basedom.className="eui-form-upload eui-inline-block";this.basedom.innerHTML="<input type='text' readOnly class='eui-form-upload-input'><div><input type='file' class='eui-form-upload-file'><i class='eui-icon eui-form-upload-icon'></i></div>";if(this.parentElement){this.parentElement.appendChild(this.basedom);}this.edit=this.basedom.firstChild;this.file=$(this.basedom).find("input[type='file']");this.file.attr("name",this.name);var s=this;this.file.change(function(){s.edit.value=this.value;});};h.prototype.getBaseDom=function(){return this.basedom;};h.prototype.getValue=function(){return this.edit.value;};h.prototype.clear=function(){this.edit.value="";this.file[0].value="";};h.prototype.setDisabled=function(s){h._superClass.prototype.setDisabled.call(this,s);if(this.isDisabled()){this.edit.setAttribute("disabled","true");this.file.setAttribute("disabled","true");}else{this.edit.removeAttribute("disabled");this.file.removeAttribute("disabled");}};function b(s){i.call(this,s);this.parentElement=s["parentElement"];this.basedom=null;this.callback=s.callback;this._initEFormComponent(s);this.addBaseCss(s.baseCss);if(s.disabled){this.setDisabled(s.disabled);}}EUI.extendClass(b,i,"EFormComponent");b.prototype.dispose=function(s){this.$form=null;this.framedom=null;b._superClass.prototype.dispose.call(this);};b.prototype._initEFormComponent=function(u){var A=u.datas,C=u.target,B=EUI.idRandom("EFormComponent"),D=u.enctype,w=u.name||"",t=u.method||"post",x=u.id||"",v=C||B,y=u.action||"",E=this.doc;var s=['<form name="'+w+'"'];s.push(' method="'+t+'"');s.push(' id="'+x+'"');s.push(' action="'+y+'"');s.push(' target="'+v+'"');if(D){s.push(' enctype="'+D+'"');}s.push(" >");if(EUI.isObject(A)){for(var F in A){s.push('<input type="hidden" name="'+F+'" value="'+A[F]+'">');}}if(!C){s.push('<iframe name="'+B+'" id="'+B+'" style="display:none;" />');}s.push("</form>");var H=E.createElement("div");H.innerHTML=s.join("");var z=H.firstChild,G=z.lastChild;this.basedom=z;this.framedom=G;if(this.parentElement){this.parentElement.appendChild(z);}this.$form=$(this.basedom);};b.prototype.setData=function(s,t){var u=this.$form.find("input[name='"+s+"']")[0];if(u){u.value=t;}else{this.$form.append('<input type="hidden" name="'+s+'" value="'+t+'">');}};b.prototype.getBaseDom=function(){return this.basedom;};b.prototype.getForm=function(){return this.basedom;};b.prototype.getIFrame=function(){return this.framedom;};b.prototype.setAction=function(s){s=s||"";this.basedom.setAttribute("action",s);};b.prototype.submit=function(t){if(t){this.setAction(t);}if(EUI.isFunction(this.callback)){var s=this,u=this.framedom;if(u.attachEvent){u.onreadystatechange=function(v){if(this.readyState=="complete"){var w=v.currentTarget.contentDocument?v.currentTarget.contentDocument.body.innerText:"";s.callback(s,w);u.onload=null;}};}else{u.onload=function(v){var w=v.currentTarget.contentDocument?v.currentTarget.contentDocument.body.innerText:"";s.callback(s,w);u.onload=null;};}}this.basedom.submit();};b.prototype.setDisabled=function(s){b._superClass.prototype.setDisabled.call(this,s);if(this.isDisabled()){this.basedom.setAttribute("disabled","true");}else{this.basedom.removeAttribute("disabled");}};function o(s){i.call(this,s);this.basedom=null;this.minValue=EUI.isNumber(s["minvalue"])?s["minvalue"]:0;this.maxValue=EUI.isNumber(s["maxvalue"])?s["maxvalue"]:100;this.runStep=s["runstep"];this.isvert=EUI.parseBool(s["isvert"],false);if(this.isvert){this.height=EUI.isNumber(s["height"])?s["height"]:200;this.height=EUI.toPerNumber(this.height);}else{this.height=EUI.isNumber(s["width"])?s["width"]:200;this.width=EUI.toPerNumber(this.width);}this.enableMoveChange=EUI.parseBool(s.enableMoveChange,false);this._initEFormRange();this.setEditVisible(s["visible"]);this.setEditReadOnly(s["readonly"]);this.setDoubleRange(s["doublerange"]);this.setValue(s["value"],false);if(s.disabled){this.setDisabled(s.disabled);}this.onchange=s["onchange"];}EUI.extendClass(o,i,"EFormRange");o.prototype.dispose=function(s){$(this.rangedom).unbind("mousedown.drag click.drag");$(this.doc.body).unbind("mousemove.drag");$(this.edit).unbind("blur.default keypress.default");this.editVisible=null;this.editReadOnly=null;this.minValue=null;this.maxValue=null;this.width=null;this.height=null;this.doublerange=null;this.readOnly=null;this.runStep=null;i.prototype.dispose.call(this);};o.prototype._initEFormRange=function(){this.basedom=this.doc.createElement("div");this.basedom.className="eui-form-range "+(this.isvert?"eui-form-range-vertical":"");if(n){EUI.addClassName(this.basedom,"eui-mobile");}this.basedom.innerHTML="<div class='eui-form-range-path'><i></i><div class='eui-form-range-area'></div><i></i></div><input type='text'>";if(this.isvert){this.setHeight(this.height);}else{this.setWidth(this.width);}if(this.parentElement){this.parentElement.appendChild(this.basedom);}this.rangedom=this.basedom.firstChild;this.beficon=this.rangedom.firstChild;this.icondom=this.beficon.nextSibling;this.afticon=this.icondom.nextSibling;this.edit=this.rangedom.nextSibling;this._initEvent();};o.prototype._initEvent=function(){var s=this;if(n){$(this.rangedom).bind("touchstart",function(t){s.canmoving=true;s.canmovedom=s.afticon;t.preventDefault();if(s.isDisabled()){return;}s._onMouseDownDrag(t);});$(this.rangedom).bind("touchmove",function(t){if(s.isDisabled()){return;}s._onMouseMoveDrag(t);});$(this.rangedom).bind("touchend",function(t){if(s.isDisabled()){return;}if(s.isvert){s._onClickEventForVert(t);}else{s._onClickEvent(t);}});}else{$(this.rangedom).bind("mousedown.drag",function(t){if(s.isDisabled()){return;}s._onMouseDownDrag(t);});$(this.doc.body).bind("mousemove.drag",function(t){if(s.isDisabled()){return;}s._onMouseMoveDrag(t);});$(this.rangedom).bind("click.drag",function(t){if(s.isDisabled()){return;}if(s.isvert){s._onClickEventForVert(t);}else{s._onClickEvent(t);}});$(this.edit).bind("blur.default",function(t){if(s.isDisabled()){return;}s.setValue(this.value);});$(this.edit).bind("keypress.default",function(t){if(s.isDisabled()){return;}if(t.keyCode=="13"){s.setValue(this.value);}});}};o.prototype._onMouseDownDrag=function(s){if(this.canmoving){this.canmoving=false;this.startmoving=true;EUI.disableDocTextSelect(this.basedom,false);var t=this;if(!n){$(this.doc.body).bind("mouseup.drag mouseleave.drag",function(u){t._onMouseUpDrag(u);});}}};o.prototype._onMouseMoveDrag=function(s){if(this.startmoving){var t=n?s.originalEvent.changedTouches[0]:s;if(this.isvert){this._setValueByPointForVert(t.clientY,this.canmovedom);}else{this._setValueByPoint(t.clientX,this.canmovedom);}if(this.enableMoveChange){this.__doCustomEvent(this.onchange,[this,this.edit.value]);}return;}var u=EUI.getTarget(this.wnd,s);if(u&&u.tagName=="I"){this.canmoving=true;this.canmovedom=u;}else{this.canmoving=false;}};o.prototype._onMouseUpDrag=function(s){if(this.startmoving){this.startmoving=false;this.canmovedom=null;$(this.doc.body).unbind("mouseup.drag mouseleave.drag");EUI.disableDocTextSelect(this.basedom,true);this.__doCustomEvent(this.onchange,[this,this.edit.value]);}};o.prototype._onClickEvent=function(u){var t=EUI.getAbsPosition(this.wnd,this.rangedom);u=n?u.originalEvent.changedTouches[0]:u;var s=u.clientX-t.x,B=u.clientY-t.y;var v=this.isvert;if(this.doublerange){var A=v?this.beficon.offsetTop:this.beficon.offsetLeft;var w=v?this.afticon.offsetTop:this.afticon.offsetLeft;var z=((v?B:s)<(A+w)/2)?this.beficon:this.afticon;if(v){this._setValueByPointForVert(u.clientY,z);}else{this._setValueByPoint(u.clientX,z);}}else{if(v){this._setValueByPointForVert(u.clientY,this.afticon);}else{this._setValueByPoint(u.clientX,this.afticon);}}this.__doCustomEvent(this.onchange,[this,this.edit.value]);};o.prototype._setValueByPoint=function(t,x){var y=this.getStepPx(),z=EUI.getAbsPosition(this.wnd,this.rangedom),u=t-z.x,F=0,w=this.rangedom.offsetWidth,C,s;if(this.doublerange){this.beficon==x?C=this.afticon.offsetLeft:s=this.beficon.offsetLeft;}var A=u%y,E=y/2;if(A>0){u=u-A+(A<E?0:y);}var D=u/w*(this.maxValue-this.minValue);var B=this.minValue+Math.round(D);if(this.runStep){B=this.minValue+Math.round(D/this.runStep)*this.runStep;B=Math.max(Math.min(B,this.maxValue),this.minValue);}if(this.doublerange){w=EUI.isNumber(C)?C:w;F=EUI.isNumber(s)?s:F;B=this.beficon==x?Math.min(B,parseInt(this.afticon.title,10)):Math.max(B,parseInt(this.beficon.title,10));}x.title=B;u=Math.max(Math.min(u,w),F);x.style.left=Math.round(u)+"px";this._setEditValue(B,x);this._setDomPosition();};o.prototype._setPointByValue=function(t,s){t=Math.round(t);s.title=t;this._setEditValue(t,s);var v=this.getStepPx();var u=(t-this.minValue)/this.runStep*v;s.style.left=Math.round(u)+"px";this._setDomPosition();};o.prototype._setDomPosition=function(){var t=this.beficon.offsetLeft;var s=this.afticon.offsetLeft;if(this.doublerange){this.icondom.style.left=t+"px";this.icondom.style.width=(s-t)+"px";}else{this.icondom.style.left=t+"px";this.icondom.style.width=(s-t)+"px";}};o.prototype._onClickEventForVert=function(t){t=n?t.originalEvent.changedTouches[0]:t;var s=EUI.getAbsPosition(this.wnd,this.rangedom);var x=t.clientY-s.y;if(this.doublerange){var w=this.beficon.offsetTop;var u=this.afticon.offsetTop;var v=(x<(w+u)/2)?this.beficon:this.afticon;this._setValueByPointForVert(t.clientY,v);}else{this._setValueByPointForVert(t.clientY,this.afticon);}this.__doCustomEvent(this.onchange,[this,this.edit.value]);};o.prototype._setValueByPointForVert=function(s,w){var y=this.getStepPx(),z=EUI.getAbsPosition(this.wnd,this.rangedom),C=s-z.y,t=0,A=this.rangedom.offsetHeight,u,x;if(this.doublerange){this.beficon==w?u=this.afticon.offsetTop:x=this.beficon.offsetTop;}var B=C%y,F=y/2;if(B>0){C=C-B+(B<F?0:y);}var E=C/A*(this.maxValue-this.minValue);var D=this.minValue+Math.round(E);if(this.runStep){D=this.minValue+Math.round(E/this.runStep)*this.runStep;D=Math.max(Math.min(D,this.maxValue),this.minValue);}if(this.doublerange){A=EUI.isNumber(u)?u:A;t=EUI.isNumber(x)?x:t;D=this.beficon==w?Math.min(D,parseInt(this.afticon.title,10)):Math.max(D,parseInt(this.beficon.title,10));}w.title=D;C=Math.max(Math.min(C,A),t);w.style.top=Math.round(C)+"px";this._setEditValue(D,w);this._setDomPositionForVert();};o.prototype._setPointByValueForVert=function(t,s){t=Math.round(t);s.title=t;this._setEditValue(t,s);var v=this.getStepPx();var u=(t-this.minValue)/this.runStep*v;s.style.top=Math.round(u)+"px";this._setDomPositionForVert();};o.prototype._setDomPositionForVert=function(){var t=this.beficon.offsetTop;var s=this.afticon.offsetTop;if(this.doublerange){this.icondom.style.top=t+"px";this.icondom.style.height=(s-t)+"px";}else{this.icondom.style.top=t+"px";this.icondom.style.height=(s-t)+"px";}};o.prototype._setEditValue=function(v,u){if(this.doublerange){var w=this.edit.value,t=w.split("-");var s=t.length;if(s===3){t=[-t[1],t[2]];}else{if(s===4){t=[-t[1],-t[3]];}}if(u==this.beficon){this.edit.value=v+"-"+t[1];}else{this.edit.value=t[0]+"-"+v;}this.edit.setAttribute("title",this.edit.value);}else{this.edit.value=v;}};o.prototype.setDisabled=function(s){o._superClass.prototype.setDisabled.call(this,s);if(this.isDisabled()){this.edit.setAttribute("disabled","true");}else{this.edit.removeAttribute("disabled");}};o.prototype.setEditWidth=function(t){if(this.isvert){return;}var s=this.edit.offsetWidth,u=this.basedom.offsetWidth-this.rangedom.offsetWidth;this.edit.style.width=EUI.toPerNumber(t);this.rangedom.style.marginRight=u+(t-s)+"px";};o.prototype.getEditWidth=function(){return this.edit.offsetWidth;};o.prototype.getBaseDom=function(){return this.basedom;};o.prototype.setOnChange=function(s){this.onchange=s;};o.prototype.setEditVisible=function(s){this.editVisible=m(s,false);if(this.editVisible){EUI.removeClassName(this.edit,"eui-hide");EUI.addClassName(this.basedom,"eui-form-range-value");}else{EUI.addClassName(this.edit,"eui-hide");EUI.removeClassName(this.basedom,"eui-form-range-value");}var t=this.edit.value;if(t){this.setValue(this.edit.value,false);}};o.prototype.setEditReadOnly=function(s){this.editReadOnly=m(s,false);this.edit.readOnly=this.editReadOnly;};o.prototype.getValue=function(){return this.edit.value;};o.prototype.setValue=function(x,u){if(!this.doublerange){x=(x!==null&&!isNaN(x))?parseInt(x,10):this.minValue;if(isNaN(x)){x=this.minValue;}x=Math.max(Math.min(x,this.maxValue),this.minValue);x=this.ensureValueInStep(x);if(this.isvert){this._setPointByValueForVert(x,this.afticon);}else{this._setPointByValue(x,this.afticon);}}else{var x=EUI.isString(x)?x:(x+"");var w=x?x.split("-"):[];var s=w.length;if(s===3){w=[-w[1],w[2]];}else{if(s===4){w=[-w[1],-w[3]];}}var v=s>0?parseInt(w[0]):this.minValue;var t=s>1?parseInt(w[1]):this.maxValue;v=Math.max(Math.min(v,this.maxValue),this.minValue);t=Math.max(Math.min(t,this.maxValue),this.minValue);if(v>t){this.edit.value=this.edit.title;return;}v=this.ensureValueInStep(v);t=this.ensureValueInStep(t);if(this.isvert){this._setPointByValueForVert(v,this.beficon);this._setPointByValueForVert(t,this.afticon);}else{this._setPointByValue(v,this.beficon);this._setPointByValue(t,this.afticon);}}if(m(u,true)){this.__doCustomEvent(this.onchange,[this,this.edit.value]);}};o.prototype.ensureValueInStep=function(u){u=Math.round(u);if(u>=this.maxValue){u=this.maxValue;}else{var s=this.runStep,v=u%s,t=s/2;if(Math.abs(v)>0){if(u<0){u=u-v-(Math.abs(v)<t?0:s);}else{u=u-v+(v<t?0:s);}}}return Math.min(u,this.maxValue);};o.prototype.setDoubleRange=function(s){s=m(s,false);if(this.doublerange==s){return;}if(s){EUI.removeClassName(this.beficon,"eui-hide");}else{EUI.addClassName(this.beficon,"eui-hide");}this.doublerange=s;};o.prototype.setMinValue=function(s){s=EUI.isNumber(s)?s:this.minValue;if(this.minValue===s){return;}this.minValue=s;this.runsteppx=undefined;};o.prototype.setMaxValue=function(s){s=EUI.isNumber(s)?s:this.maxValue;if(this.maxValue===s){return;}this.maxValue=s;this.runsteppx=undefined;};o.prototype.setStep=function(s){if(EUI.isNumber(s)&&s>0){this.runStep=s;this.runsteppx=undefined;}};o.prototype.getStepPx=function(){if(EUI.isNumber(this.runsteppx)&&this.rangedomWidth==this.rangedom.offsetWidth){return this.runsteppx;}var s=this.maxValue-this.minValue,v=this.runStep,w=this.rangedom,u=this.afticon,t;this.rangedomWidth=w.offsetWidth;if(this.isvert){t=(w.offsetHeight*v)/s;}else{t=(w.offsetWidth*v)/s;}this.runsteppx=t;return this.runsteppx;};return{ETextArea:k,ETextEditor:e,EEditBrowser:a,EFormCheckBox:c,EFormCheckBoxGroup:f,EFormSpinner:p,EFormSearch:q,EFormUpload:h,EFormRange:o,EFormComponent:b,ELink:d,EButton:l,ECheckbox:g};});