define(["eui/modules/uibase","eui/modules/elist","eui/modules/elistbox"],function(i,c,u){var b=EUI.xuiimg,l=EUI.parseBool;var e=i.EComponent,o=i.EFloatDiv,m=c.EList,h=u.EListBox;var f=["微软雅黑","Arial","Microsoft Sans Serif","MS Reference Sans Serif","Tahoma","方正舒体","方正姚体","仿宋_GB2312","黑体","华文彩云","华文仿宋","华文琥珀","华文楷体","华文隶书","华文细黑","华文新魏","华文行楷","华文中宋","楷体_GB2312","隶书","宋体","宋体-方正超大字符集","新宋体","幼圆","Verdana"],s=["12","14","16","18","20","22","24","26","28","30","32","34","36","48","72"];function d(w){e.call(this,{wnd:w["wnd"],parentElement:w["parentElement"],width:w["width"]||200,height:30});this.placeholder=w.placeholder||"";this.disabled=false;this.__keydeltext=true;this._initComboBox(this.width);this.hasFloatWidth=EUI.isNumber(w.floatwidth)?true:false;this._floatdivwidth=EUI.toPixNumber(w.floatwidth,200);this._floatdivheight=EUI.toPixNumber(w.floatheight,200);this.floatBasecss=w.floatBasecss;this.minheight=55;this.maxfloatheight=w.maxfloatheight;this.setBaseCss(w.baseCss);if(w.disabled){this.setDisabled(true);}this.enableBakcDel=EUI.parseBool(w.enableBakcDel,true);this.onaftercancel=w.onaftercancel;}d.DEFAULT_ICON=EUI.xuiimg("null.gif");EUI.extendClass(d,e,"ECombobox");d.prototype._initComboBox=function(x){var y=$('<div class="eui-form-select" style="width:'+x+';"><input type="text" class="eui-input"/><i class="eui-icon eui-form-select-icon"></i><input type="hidden" class="eui-form-hidden"></div>');if(this.parentElement){y.appendTo(this.parentElement);}this.cbar=y[0];if(EUI.browser.isMobile){EUI.addClassName(this.cbar,"eui-mobile");}this.basedom=this.cbar;this.cbar._sancomponent=this;this.edit=this.cbar.firstChild;this.edit.setAttribute("placeholder",this.placeholder);this.edit.size=1;this.edit.readOnly=true;this.domValue=this.cbar.lastChild;this.cmbBtImg=this.domValue.previousSibling;this._initEventClick();};d.prototype._initEventClick=function(){var w=this.cmbBtImg;EUI.addEvent(w,"click",this.getArrowClickEventBind());w.oncontextmenu=function(y){y.preventDefault?y.preventDefault():(y.returnValue=false);return false;};var x=this.edit;this._comboBox$EditOnKeyDownBind=this._comboBox$EditOnKeyDown.bind(this);this._comboBox$EditOnChangeBind=this._comboBox$EditOnChange.bind(this);EUI.addEvent(x,"click",this.getInputClickEventBind());EUI.addEvent(x,"keydown",this._comboBox$EditOnKeyDownBind);EUI.addEvent(x,"change",this._comboBox$EditOnChangeBind);};d.prototype.setEnableBakcDel=function(w){this.enableBakcDel=EUI.parseBool(w,true);};d.prototype.getArrowClickEventBind=function(){if(!this.arrowClickEventBind){this.arrowClickEventBind=this._comboBox$BtOnClick.bind(this);}return this.arrowClickEventBind;};d.prototype.getInputClickEventBind=function(){if(!this._comboBox$EditOnClickBind){this._comboBox$EditOnClickBind=this._comboBox$EditOnClick.bind(this);}return this._comboBox$EditOnClickBind;};d.prototype._comboBox$BtOnClick=function(){if(this.isDisabled()){return false;}if(this.edit.readOnly){EUI.selectValue(this.edit);}this.showDropDownList(!this.isDropDownListVisible());};d.prototype.setDisabled=function(x){d._superClass.prototype.setDisabled.call(this,x);var w=this.isDisabled();if(w){this.edit.setAttribute("disabled","true");}else{this.edit.removeAttribute("disabled");}};d.prototype.setBaseCss=function(w){if(w){EUI.addClassName(this.cbar,w);}};d.prototype.isDropDownListVisible=function(){return !!(this.div&&this.div.isVisible());};d.prototype.showDropDownList=function(z){z=EUI.parseBool(z,true);var w=this.getDropDownFloatDiv(),x=w.getBaseDom();if(EUI.browser.isMobile&&EUI.hasClassName(x,"eui-panel-selectlist")){EUI.addClassName(x,"eui-mobile");}if(w.isVisible()===z){return;}if(z){this.__beforeShowDropDownList();EUI.addClassName(this.cbar,"eui-form-select-focus");w.setVisible(z);this.__adjustDropdownListBounds(true);this.__onAfterShowDropDownList();if(!EUI.browser.isie){this.wnd.captureEvents(Event.MOUSEDOWN);}var y=this.getDocMousedownHandler();EUI.attacheEvent4TopIframes("add","mousedown",y);EUI.attacheEvent4TopIframes("add","mousewheel",y);this._dropDownListHaveShowed=true;}else{EUI.removeClassName(this.cbar,"eui-form-select-focus");w.setVisible(z);var y=this.getDocMousedownHandler();EUI.attacheEvent4TopIframes("remove","mousedown",y);EUI.attacheEvent4TopIframes("remove","mousewheel",y);if(!EUI.browser.isie){this.wnd.releaseEvents(Event.MOUSEDOWN);}this.__afterCancelDropDownList();}};d.prototype.getDropDownFloatDiv=function(){var w=this.div;if(!w){w=new o({width:this._floatdivwidth,height:this._floatdivheight,wnd:this.wnd,parentElement:this.doc.body});this.div=w;w.addBaseCss(this.floatBasecss);this._initDropDownDom(w);if(this.onfirstdropdown){this.onfirstdropdown(this,w);}w.setVisible(false);}return w;};d.prototype._initDropDownDom=function(w){};d.prototype.setHeight=function(w){var y=this.getBaseDom(),x=EUI.toPerNumber(w);y.style.cssText+=";height: "+x+";line-height: "+x;};d.prototype.setMinHeight=function(w){this.minheight=parseInt(w,10);};d.prototype.setFloatBounds=function(y,z,x,A){this.getDropDownFloatDiv().setBounds(y,z,x,A);};d.prototype.setFloatBorder=function(w){this.getDropDownFloatDiv().setBorderWidth(w);};d.prototype.setHint=function(x,w){this._hintvalue=x;this._hintcls=w||"comboboxhint";var x=this.edit.value;if(!x){this.edit.value=this._hintvalue;}};d.prototype.setIconStyle=function(w){this.cmbBtImg.iconstyle=w;EUI.addClassName(this.cmbBtImg,w);};d.prototype.setIcon=function(w){w=w?w:d.DEFAULT_ICON;this.icon=$('<i class="eui-icon"></i>').prependTo(this.cbar)[0];this.icon.style.backgroundImage="url("+w+")";return this.icon;};d.prototype.getDom=function(){return this.cbar;};d.prototype.getBaseDom=d.prototype.getDom;d.prototype.getEdit=function(){return this.edit;};d.prototype.getValueDom=function(){return this.domValue;};d.prototype.setValue=function(w){this.domValue.value=w;};d.prototype.getValue=function(){return this.domValue.value;};d.prototype.setCaption=function(y,w){var x=this.edit;if(w){x.focus();}if(!y&&this._hintvalue){x.value=this._hintvalue;x.title="";EUI.addClassName(x,this._hintcls);}else{x.value=y;x.title=y;EUI.removeClassName(x,this._hintcls);}};d.prototype.getCaption=function(){var w=this.edit.value;return w===this._hintvalue?"":w;};d.prototype.setOnChange=function(w){this.__onchange=w;};d.prototype.processOnChange=function(){if(this.__onchange){this.__doCustomEvent(this.__onchange,[this],this);}};d.prototype.getDropDownDomObj=function(){return this.getDropDownFloatDiv().getDom();};d.prototype.setOnFirstDropDown=function(w){this.onfirstdropdown=w;};d.prototype.setBeforeShowDropDownList=function(w){this.onbeforeshowdropdownlist=typeof(w)==="function"?w:null;};d.prototype.__beforeShowDropDownList=function(){if(this.onbeforeshowdropdownlist){this.onbeforeshowdropdownlist(this);}};d.prototype.__onAfterShowDropDownList=function(){if(this.onaftershowdropdownlist){this.onaftershowdropdownlist(this);}};d.prototype.setAfterShowDropDownList=function(w){this.onaftershowdropdownlist=typeof(w)==="function"?w:null;};d.prototype.setAfterCancelDropDownList=function(w){this.onaftercancel=w;};d.prototype.__afterCancelDropDownList=function(){EUI.doCallBack(this.onaftercancel,this);};d.prototype._getDropdownListScrollWidth=function(){};d.prototype._getDropdownListScrollHeight=function(){};d.prototype.__adjustDropdownListBounds=function(){var I=this.cbar,A=I.getBoundingClientRect();var B=null,J=null,z=null,x=A.bottom;if(!this.notAutoChange){B=this._getDropdownListScrollWidth();J=this._getDropdownListScrollHeight();if(arguments[0]!==true&&!B&&!J){return;}}else{if(arguments[0]!==true){return;}}var G=I.offsetWidth;if(this.hasFloatWidth){B=Math.max(!B?I.offsetWidth:B,this._floatdivwidth);}else{B=Math.max(!B?G:B,G);}if(!J){J=this._floatdivheight;}else{if(this.maxfloatheight){J=Math.min(J,this.maxfloatheight);}}var C=this.doc.body,E=C.clientWidth,w=C.clientHeight;if(B>E){B=E-10;}z=Math.min(E+C.scrollLeft-B,A.left);var H=C.scrollTop,F=A.top,y=w+H-x-5;if(F>y){if(y<J){x=F-J;if(x<5){x=5;var D=F-H-5;J=D<this.minheight?Math.max(this.minheight,w-10):D;}}}else{if(y<J){J=y;}}this.getDropDownFloatDiv().setBounds(z,x,B,J);};d.prototype.getDocMousedownHandler=function(x){var w=this._doc_mousedown_handler;if(!w){w=this._doconmousedown.bind(this);this._doc_mousedown_handler=w;}return w;};d.prototype._doconmousedown=function(x){var w=EUI._getMouseEventTarget(x);if(!w){return;}if(EUI.isChildNode(this.getDom(),w,true)){x.stopPropagation?x.stopPropagation():(x.cancelBubble=true);return;}if(EUI.isChildNode(this.getDropDownFloatDiv().getBaseDom(),w,true)){if(w.nodeType===3){w=w.parentNode;}return;}if(!this.doc){return;}this.showDropDownList(false);};d.prototype.readOnly=function(w){this.edit.readOnly=typeof(w)=="boolean"?w:true;};d.prototype.keyDelText=function(w){this.__keydeltext=w;};d.prototype.setWidth=function(w){this.cbar.style.width=EUI.toPerNumber(w);};d.prototype._comboBox$EditOnKeyDown=function(x){var w=this.edit;if(!w.readOnly||this.enableBakcDel!==true){return true;}if(this.__keydeltext&&(x.keyCode==8||x.keyCode==46)){w.value="";this.setValue("");this.processOnChange();}return false;};d.prototype._comboBox$EditOnClick=function(){var w=this.edit;if(this.disabled){return false;}if(w.readOnly){EUI.selectValue(w);}this.showDropDownList(false);};d.prototype._comboBox$EditOnChange=function(){var w=this.edit;if(w.readOnly){return true;}this.domValue.value=w.value;this.processOnChange();};d.prototype.dispose=function(){this._orgHeight=null;this.onfirstdropdown=null;this.onaftercancel=null;this.onbeforeshowdropdownlist=null;this.onaftershowdropdownlist=null;if(this.cbar){this.cbar._sancomponent=null;this.cbar=null;}if(this.cmbBtImg){this.cmbBtImg.onclick=null;EUI.removeEvent(this.cmbBtImg,"click",this.getArrowClickEventBind());this.cmbBtImg.oncontextmenu=null;this.cmbBtImg=null;}if(this.edit){EUI.removeEvent(this.edit,"click",this.getInputClickEventBind());EUI.removeEvent(this.edit,"keydown",this._comboBox$EditOnKeyDownBind);EUI.removeEvent(this.edit,"change",this._comboBox$EditOnChangeBind);this._comboBox$EditOnClickBind=null;this._comboBox$EditOnKeyDownBind=null;this._comboBox$EditOnChangeBind=null;this.edit=null;}this.domValue=null;this.__onchange=null;if(this.div){this.div.dispose();this.div=null;}this._hintvalue=null;this._hintcls=null;e.prototype.dispose.call(this);};function k(w){d.call(this,w);this.maxfloatheight=EUI.toPixNumber(w.maxfloatheight,300);this.floatBasecss=w.floatBasecss||"";this._immediate=true;this._isShowInput=EUI.parseBool(w.showFilter,true);this._needhidecheckall=!EUI.parseBool(w.showCheckAll,true);this.datas=w.datas;this.data$key=w.data$key||"value";this.data$separator=w.data$separator||",";this.caption$key=w.caption$key||"caption";this.caption$separator=w.caption$separator||",";this.setColumns(w.columns||[{id:this.caption$key,width:"100%",hint:w.hint}]);this.needDefaultFormat=EUI.parseBool(w.needDefaultFormat,true);this.onbeforeinit=w.onbeforeinit;this.onclickitem=w.onclickitem;this.onmoredata=w.onmoredata;this.enableBakcDel=EUI.parseBool(w.enableBakcDel,true);this.showFooter=EUI.parseBool(w.showFooter,true);this._initValue(w.value,this.datas);}EUI.extendClass(k,d,"EListCombobox");k.prototype._initDropDownDom=function(x){if(!this.list){var B=this.getDropDownDomObj();if(EUI.browser.isMobile){B.style.cssText+=";height: 50%; background-color: #ffffff;";B.parentNode.style.cssText+=";background-color: rgba(0,0,0,.5);";}this.getDropDownFloatDiv().addBaseCss("eui-panel-selectlist");var z=[];z.push('<div class="eui-panel-selectlist-check eui-clear">');z.push('<div class="eui-panel-selectlist-check-left eui-unselect eui-form-checkbox">');z.push('<i class="eui-icon '+(EUI.browser.isie?"":"eui-anim eui-anim-scalespring")+' eui-form-checkbox"></i>');z.push("<span>全选</span></div>");z.push('<div class="eui-panel-selectlist-check-right"><label>过滤</label>');z.push("</div></div>");z.push('<div class="eui-panel-selectlist-content"></div>');B.innerHTML=z.join("");p();var w=this.datas;this.datas=null;this.list=new m({wnd:this.wnd,parentElement:B.childNodes[1],width:"100%",height:"100%",baseCss:"eui-elist-mini",needResizeColumns:false,onCellClick:this._callback4XlistOnClick.bind(this),columns:this.columns,datas:w,onmoredata:this.onmoredata,onDblclick:function(C){return false;}});this.__doCustomEvent(this.onbeforeinit,[this,this.list]);this.list.setHeaderVisible(false);if(EUI.browser.isMobile&&this.showFooter){B.childNodes[1].style.bottom="36px";this.listFooter=this.doc.createElement("div");this.listFooter.className="eui-panel-selectlist-footer";var A=[];A.push('<div class="eui-panel-selectlist-check-left eui-unselect eui-form-checkbox">');A.push('<i class="eui-icon '+(EUI.browser.isie?"":"eui-anim eui-anim-scalespring")+' eui-form-checkbox"></i>');A.push("<span>全选</span></div>");A.push('<div class="eui-panel-selectlist-check-right"><span class="eui-link eui-float-left eui-select-clear">清空</span>');A.push('<button class="eui-btn eui-btn-s eui-btn-primary eui-float-right" type="button" style="margin-top:5px;margin-right:5px;">确认</button>');A.push("</div>");this.listFooter.innerHTML=A.join("");B.appendChild(this.listFooter);this.clearDom=$(this.listFooter).find(".eui-select-clear")[0];var y=this;$(this.clearDom).bind("click.mobile",function(C){if(y.list){y.list.clearSelectRow();y.list.clearCheckRows();}});$(this.listFooter).find("button").bind("mousedown.mobile",function(C){y.onMobileMousedown(C);});}this._initFilterRow(B.firstChild);if(this._needlist){this._needlist=false;if(w&&w.length>0){this.doListStateByValue();}}if(EUI.browser.isMobile){if(!this.columns[0]["checkbox"]){this.setMobileCheckAll(false);}}}};k.prototype.ensureVisible=function(){var z=this.list,E=z.hasCheckCol();var x;if(E){var w=z.getCheckRows();if(w){x=w[0];}}else{x=z.getSelectRow();}var C=z.getDataContainer(),B=C.getBoundingClientRect();if(x==null){C.scrollTop=0;return;}var A=x.offsetTop+x.offsetHeight,D=B.height;if(A>D){var y=A-D;C.scrollTop=y;}else{C.scrollTop=0;}};k.prototype._comboBox$EditOnChange=function(){k._superClass.prototype._comboBox$EditOnChange.call(this);var y=this.getCaption(),x=y?y.split(this.data$separator):[""],z=[],w=this;if(!w.list){return;}w.list.browseRows(function(D,E){var B=D.caption,A=B.toUpperCase(),C=B.toLowerCase();if(x.indexOf(B)!==-1||x.indexOf(A)!==-1||x.indexOf(C)!==-1){z.push(E);}});if(this.list.hasCheckCol()){this.list.clearCheckRows();this.list.setCheckRows(z,true);}else{this.list.clearSelectRow();this.list.selectRow(z[0],false);}};k.prototype._doconmousedown=function(y){if(EUI.browser.isMobile){var x=y.target;var w=this.getDropDownDomObj();if(x===w.parentElement){this.showDropDownList(false);return;}}k._superClass.prototype._doconmousedown.call(this,y);};k.prototype.onMobileMousedown=function(w){var y=this.list,z=y.hasCheckCol(),x,A;if(z){x=y.getCheckDatas();if(x){A=y.getCheckRows()[0];}}else{x=y.getSelectDatas();if(x){A=y.getSelectRow;}}if(x){this.setCaption(this.defaultCaptionFormat(x,A));this.setValue(this.defaultValueFormat(x,A));}this.processOnChange();this.showDropDownList(false);};k.prototype.setEnableBakcDel=function(w){this.enableBakcDel=EUI.parseBool(w,true);};k.prototype.setDatas=function(w,x){this.setValue("");this.setCaption("");if(this.list){this.list.refreshData(w);this._initValue(x,w);this.doListStateByValue();}else{this.datas=w;this._needlist=true;this._initValue(x,this.datas);}};k.prototype.clearOption=function(){if(this.list){this.list.clear();}this.datas=null;};k.prototype.clearValue=function(){this.setSelectValue();};k.prototype._comboBox$EditOnKeyDown=function(x){var w=this.edit;if(x.keyCode==13){w.blur();}if(!w.readOnly||this.enableBakcDel!==true){return true;}if(this.__keydeltext&&(x.keyCode==8||x.keyCode==46)){this.setSelectValue();this.__doCustomEvent(this.onclickitem,[null,null,x,false]);this.processOnChange();}return false;};k.prototype.addOption=function(x,y){y=EUI.parseBool(y,false);if(this.list){this.list.addRow(x);}else{if(this.datas){this.datas.push(x);}else{this.datas=[x];}}if(y){var w=this.__getDataByKey(x,this.data$key);this.setSelectValue(w);}};k.prototype.addOptions=function(x){if(!x||x.length<=0){return;}for(var y=0,w=x.length;y<w;y++){this.addOption(x[y],false);}};k.prototype.removeOption=function(w){if(!EUI.isNumber(w)){return;}if(this.list){this.list.deleteRow(w);}else{if(this.datas){this.datas.splice(w,1);}}};k.prototype.setSelectValue=function(w){this.setValue("");if(!w&&w!=0){this.setCaption("");}if(this.list){this._initValue(w,this.list.getDatas()||[],true);this.doListStateByValue();}else{this._needlist=true;this._initValue(w,this.datas||[]);}};k.prototype.doListStateByValue=function(){var z=this.getValue()||"";var y=this.list,x=z?z.split(this.data$separator):[""],w=this,A=[];y.browseRows(function(C,D){var B=(w.__getDataByKey(C,w.data$key)).toString();if(x.indexOf(B)!==-1){A.push(D);}});if(A.length===0){y.clearCheckRows();y.clearSelectRow();this.setValue("");if(this.edit.innerHTML==null){this.setCaption("");}return;}if(y.hasCheckCol()){y.clearCheckRows();y.setCheckRows(A,true);}else{y.clearSelectRow();y.selectRow(A[0],false);}if(y.isCheckAll()){EUI.removeClassName(this.checkAll,"eui-form-checkbox-partial");EUI.addClassName(this.checkAll,"eui-form-checked");}else{EUI.removeClassName(this.checkAll,"eui-form-checked");EUI.addClassName(this.checkAll,"eui-form-checkbox-partial");}if(EUI.browser.isMobile&&this.showFooter){if(y.isCheckAll()){EUI.removeClassName(this.checkMobileAll,"eui-form-checkbox-partial");EUI.addClassName(this.checkMobileAll,"eui-form-checked");}else{EUI.removeClassName(this.checkMobileAll,"eui-form-checked");EUI.addClassName(this.checkMobileAll,"eui-form-checkbox-partial");}}};k.prototype.__getDataByKey=function(z,w){if(!z||!w){return;}var y=undefined;if(EUI.isArray(z)){var x=z[0];y=EUI.isObject(x)?x[w]:x;}else{y=z[w];}return y;};k.prototype._initValue=function(E,A,B){if(E===undefined||E===null){return;}var G=E,w;if(!A||A.length===0){w=E;}else{var F=E.split?E.split(this.data$separator):[E],z=[];for(var y=0,C=A.length;y<C;y++){var x=A[y],D=this.__getDataByKey(x,this.data$key);if(F.indexOf(D)!==-1){z.push(this.__getDataByKey(x,this.caption$key));}}w=z.join(this.caption$separator);}if(B){w=w||E;}this.setCaption(w);this.setValue(G);this._needlist=true;};k.prototype._initFilterRow=function(y){var w=this;this.checkClickEventBind=function(){EUI.toggleClassName(w.checkAll,"eui-form-checked");w.checkAllOptions(EUI.hasClassName(w.checkAll,"eui-form-checked"),true);if(w.needDefaultFormat){w.setCaption(w.defaultCaptionFormat(null,1));w.setValue(w.defaultValueFormat(null,1));}w.processOnChange();};this.inputKeyupEventBind=function(z){w._inputChange(z);};this.filterRow=y;if(EUI.browser.isMobile&&this.showFooter){this.checkMobileAllDom=y.nextSibling.nextSibling.firstChild;this.checkMobileAll=this.checkMobileAllDom.firstChild;EUI.addEvent(this.checkMobileAll,"click",this.checkClickEventBind);}this.checkAllDom=y.firstChild;this.checkAll=this.checkAllDom.firstChild;EUI.addEvent(this.checkAll,"click",this.checkClickEventBind);this.filterDom=y.lastChild;var x=require("eui/modules/ecommonctrls").EFormSearch;this.searchobj=new x({wnd:window,parentElement:this.filterDom,emptySearch:true,showClearText:true,onsearch:function(A,B,z){w._inputChange(B,z);},onclear:function(A,B,z){w._inputChange(B,z);}});this.searchobj.getBaseDom().style.width="";EUI.addEvent(this.searchobj.edit,"keyup",this.inputKeyupEventBind);this.setCheckAll(!this._needhidecheckall);this.setShowInput(this._isShowInput);if(!this._isShowInput&&this._needhidecheckall){this.filterRow.style.display="none";EUI.getNextElementSibling(this.filterRow).style.top="0";}};k.prototype._getDropdownListScrollHeight=function(){var x=this.getDropDownFloatDiv().getBaseDom();x.style.height="";var w=0,y=this.list;w+=this.filterRow.offsetHeight;w+=y.getRealHeight();return w+14;};k.prototype._getDropdownListScrollWidth=function(){var y=this.list;if(!y){return;}var x=y.getDataContainer().firstChild;x.style.cssText+=";width:auto !important;";var w=x.offsetWidth;x.style.cssText+=";width:100% !important;";return w+14;};k.prototype.setOnBeforeInit=function(w){this.onbeforeinit=w;};k.prototype.checkAllOptions=function(x,w){if(w){if(x){EUI.removeClassName(this.checkAll,"eui-form-checkbox-partial");EUI.addClassName(this.checkAll,"eui-form-checked");EUI.removeClassName(this.checkMobileAll,"eui-form-checkbox-partial");EUI.addClassName(this.checkMobileAll,"eui-form-checked");}else{EUI.removeClassName(this.checkAll,"eui-form-checked");EUI.removeClassName(this.checkMobileAll,"eui-form-checked");}}this.list.setCheckRows("all",x);};k.prototype.__adjustDropdownListBounds=function(){if(EUI.browser.isMobile){var F=this.getDropDownFloatDiv().getBaseDom();F.style.cssText+=";top:0;left:0;width:100%;height:100%;";}else{k._superClass.prototype.__adjustDropdownListBounds.call(this);var B=this.cbar.offsetWidth,F=this.getDropDownFloatDiv().getBaseDom();var y=this.list.getDataContainer().firstChild,C=F.offsetWidth,H=y.scrollWidth,E;y.style.cssText+=";width:auto !important;";var G=y.scrollWidth;if(G>H){E=y.offsetHeight>this.maxfloatheight-10?C+EUI.getScrollbarWidth():C;}else{E=C;}y.style.cssText+=";width:100% !important;";if(this.hasFloatWidth){if(E>this._floatdivwidth){y.style.cssText+=";width:auto !important;";}}else{if(E>B*2){y.style.cssText+=";width:auto !important;";}E=Math.min(E,B*2);}var D=this.cbar,x=D.getBoundingClientRect();var z=this.doc.body,A=z.clientWidth,w=Math.min(A+z.scrollLeft-E,x.left);F.style.cssText+=";width:"+E+"px;left:"+w+"px;";}this.ensureVisible();};k.prototype.setOnClickItem=function(w){this.onclickitem=w;};k.prototype.defaultCaptionFormat=function(D,w){var B=this.list,A=EUI.isNumber(w)?w:w.cellIndex,E=B.hasCheckCol();if(E){var C=this.list.getCheckDatas()||[],F=[];for(var y=0,z=C.length;y<z;y++){var x=C[y];F.push(this.__getDataByKey(x,this.caption$key));}return F.join(this.caption$separator);}else{return this.__getDataByKey(D,this.caption$key);}};k.prototype.defaultValueFormat=function(C,B){if(this.list.hasCheckCol()){var y=this.list.getCheckDatas()||[],x=[];for(var z=0,w=y.length;z<w;z++){var A=y[z];x.push(this.__getDataByKey(A,this.data$key));}return x.join([this.data$separator]);}else{return this.__getDataByKey(C,this.data$key);}};k.prototype._callback4XlistOnClick=function(A,z,x){if(!z){return;}var y=this.list.isCheckRow(z.parentNode.rowIndex);if(this.__doCustomEvent(this.onclickitem,[A,z,x,y])===false){return;}if(!this.list.hasCheckCol()){if(!EUI.browser.isMobile){this.showDropDownList(false);}}else{var w=this.list.isCheckAll();if(w){EUI.removeClassName(this.checkAll,"eui-form-checkbox-partial");EUI.addClassName(this.checkAll,"eui-form-checked");}else{EUI.removeClassName(this.checkAll,"eui-form-checked");if(this.list.getCheckDatas()!=null){EUI.addClassName(this.checkAll,"eui-form-checkbox-partial");}else{EUI.removeClassName(this.checkAll,"eui-form-checkbox-partial");}}if(EUI.browser.isMobile&&this.showFooter){if(w){EUI.removeClassName(this.checkMobileAll,"eui-form-checkbox-partial");EUI.addClassName(this.checkMobileAll,"eui-form-checked");}else{EUI.removeClassName(this.checkMobileAll,"eui-form-checked");if(this.list.getCheckDatas()!=null){EUI.addClassName(this.checkMobileAll,"eui-form-checkbox-partial");}else{EUI.removeClassName(this.checkAll,"eui-form-checkbox-partial");}}}}if(this.needDefaultFormat){if(!EUI.browser.isMobile){this.setCaption(this.defaultCaptionFormat(A,z));this.setValue(this.defaultValueFormat(A,z));}}if(!EUI.browser.isMobile){this.processOnChange();}};k.prototype.setColumns=function(w){this.columns=w;};k.prototype.clearFilterValue=function(){if(this.searchobj){this.searchobj.setValue("");}};k.prototype._inputChange=function(x){var w;if(!EUI.isString(x)){w=x;x=this.searchobj.getValue();}this._replacedInputValue=this._replaceWildCard(x);if(this._immediate){this.list.filter(((this._filterfunc)?this._filterfunc.bind(this):x),200,this.changeHeight,this);}else{if(w&&w.keyCode==13){this.list.filter((this._filterfunc)?this._filterfunc.bind(this):x,null,this.changeHeight,this);}}};k.prototype.changeHeight=function(w){w.__adjustDropdownListBounds();if(w.list){w.list.resizePrecentColumn(true);}};k.prototype._search=function(){this.list.filter((this._filterfunc)?this._filterfunc.bind(this):this._input.value);};k.prototype.setImmediate=function(w){this._immediate=EUI.parseBool(w,false);};k.prototype.setShowInput=function(w){this._isShowInput=EUI.parseBool(w,true);if(this.filterDom){this.filterDom.style.display=this._isShowInput?"":"none";}};k.prototype.setCheckAll=function(x){var w=EUI.parseBool(x,true);if(EUI.browser.isMobile){w=false;}if(!this.filterDom){return;}if(w){this.checkAllDom.style.display="";this.filterDom.style.paddingLeft="";}else{this.checkAllDom.style.display="none";this.filterDom.style.paddingLeft="5px";}this._needhidecheckall=!w;};k.prototype.setMobileCheckAll=function(z){var y=EUI.parseBool(z,true);if(!this.listFooter){return;}var x=this.listFooter.firstChild,w=x.nextSibling;if(y){x.style.display="";w.style.paddingLeft="";}else{x.style.display="none";w.style.paddingLeft="10px";}};k.prototype.isShowInput=function(){return this._isShowInput;};k.prototype.setFilter=function(w){if(typeof(w)!="number"){this._filterfunc=w;return;}switch(w){case 0:this._filterfunc="";break;case 1:this._filterfunc=this._wildCardFilter;break;case 2:this._filterfunc=this._indexFilter;break;default:return;}};k.prototype._indexFilter=function(z){var x=z.ownerList.columns.length,w=this._input.value;for(var y=0;y<x;y++){if((w==null||w=="")||(z.getValue(y).indexOf(w)>=0)){return true;}}return false;};k.prototype._wildCardFilter=function(y){var y=y;if(!(this._input)){return true;}if(!(y.ownerList)){return false;}var w=y.ownerList.columns.length;for(var x=0;x<w;x++){if(y.getValue(x).match(this._replacedInputValue)){return true;}}return false;};k.prototype._replaceWildCard=function(x){var w=EUI.convert2Regex(x);if(w==null){return"";}return w;};k.prototype.getEList=function(){return this.list;};k.prototype.dispose=function(){if(this.list){this.list.dispose();this.list=null;}if(this.checkAll){EUI.removeEvent(this.checkAll,"click",this.checkClickEventBind);this.checkClickEventBind=null;this.filterRow=null;this.checkAllDom=null;this.checkAll=null;this.filterDom=null;this.showFooter=null;if(this.searchobj){EUI.removeEvent(this.searchobj.edit,"keyup",this.inputKeyupEventBind);this.inputKeyupEventBind=null;this.searchobj.dispose();this.searchobj=null;}if(EUI.browser.isMobile&&this.showFooter){$(this.clearDom).unbind("click.mobile");this.clearDom=null;$(this.listFooter).find("button").unbind("mousedown.mobile");this.listFooter=null;this.checkMobileAll=null;this.checkMobileAllDom=null;}}d.prototype.dispose.call(this);};function g(w){w=w||{};k.call(this,w);this.onEnterKey=w.onEnterKey;this.readOnly(false);}EUI.extendClass(g,k,"EEditCombobox");g.prototype.dispose=function(){this.onEnterKey=null;g._superClass.prototype.dispose.call(this);};g.prototype._comboBox$EditOnKeyDown=function(y){var w=this.edit;if(y.keyCode===13){var x=w.value;if(x){this.addOption(x);}this.__doCustomEvent(this.onEnterKey,[this,x]);}};g.prototype.addOption=function(x,y){var w={};w[this.data$key]=x;w[this.caption$key]=y||x;g._superClass.prototype.addOption.call(this,w);};function n(w){d.call(this,w);t();this.addBaseCss("eui-picker");EUI.addClassName(this.edit,"eui-hide");this.domNode=this.doc.createElement("div");this.cbar.insertBefore(this.domNode,this.edit);this.listbox=new h({wnd:this.wnd,parentElement:this.getDropDownDomObj(),width:"100%",height:"100%",baseCss:"eui-elistbox-custom"});this.getEdit().size=14;EUI.addClassName(this.listbox.getContent(),"eui-listbox-vertical");this.listbox.combobox=this;this.listbox.setOnClick(function(y,x,z){y.combobox._listboxClicked(y,x,z);});this.containerDom=this.getValueDom().parentNode;this._readOnly=false;}EUI.extendClass(n,d,"EListBoxCombobox");n.prototype.dispose=function(){if(this.listbox){this.listbox.combobox=null;this.listbox.dispose();this.listbox=null;}this.onValueChange=null;this.onPropertyValueChange=null;d.prototype.dispose.call(this);};n.prototype.getItemIndex=function(){return this.itemindex;};n.prototype.setItemIndex=function(y){this.itemindex=y;var x=this.listbox,z=x.getItem(y),w=x.getFocusItem(),A;if(w!==z){x.setItemFocus(z,null,true);}this.setCaption(z);A=z._customvalue?z._customvalue:this.itemindex;this.setValue(A);if(!this._readOnly){}};n.prototype.setCaption=function(w){this.domNode.innerHTML=w.innerHTML;};n.prototype.doValueChanged=function(){EUI.doCallBack(this.onValueChange,this);EUI.doCallBack(this.onPropertyValueChange,this);};n.prototype._listboxClicked=function(){this.showDropDownList(false);var w=this.listbox,x=w.getFocusItem();this.setItemIndex(this.listbox.getItemIndex(0,x));this.doValueChanged();};n.prototype.readOnly=function(w){this._readOnly=w;d.prototype.readOnly.call(this,w);};n.prototype.getListBox=function(){return this.listbox;};var r={K_1:{code:49,name:"1"},K_2:{code:50,name:"2"},K_3:{code:51,name:"3"},K_4:{code:52,name:"4"},K_5:{code:53,name:"5"},K_6:{code:54,name:"6"},K_7:{code:55,name:"7"},K_8:{code:56,name:"8"},K_9:{code:57,name:"9"},K_0:{code:48,name:"0"},K_Q:{code:81,name:"Q"},K_W:{code:87,name:"W"},K_E:{code:69,name:"E"},K_R:{code:82,name:"R"},K_T:{code:84,name:"T"},K_Y:{code:89,name:"Y"},K_U:{code:85,name:"U"},K_I:{code:73,name:"I"},K_O:{code:79,name:"O"},K_P:{code:80,name:"P"},K_A:{code:65,name:"A"},K_S:{code:83,name:"S"},K_D:{code:68,name:"D"},K_F:{code:70,name:"F"},K_G:{code:71,name:"G"},K_H:{code:72,name:"H"},K_J:{code:74,name:"J"},K_K:{code:75,name:"K"},K_L:{code:76,name:"L"},K_Z:{code:90,name:"Z"},K_X:{code:88,name:"X"},K_C:{code:67,name:"C"},K_V:{code:86,name:"V"},K_B:{code:66,name:"B"},K_N:{code:78,name:"N"},K_M:{code:77,name:"M"},K_F1:{code:112,name:"F1"},K_F2:{code:113,name:"F2"},K_F3:{code:114,name:"F3"},K_F4:{code:115,name:"F4"},K_F5:{code:116,name:"F5"},K_F6:{code:117,name:"F6"},K_F7:{code:118,name:"F7"},K_F8:{code:119,name:"F8"},K_F9:{code:120,name:"F9"},K_F10:{code:121,name:"F10"},K_F11:{code:122,name:"F11"},K_F12:{code:123,name:"F12"},K_Dotu:{code:192,name:"Dotu"},K_Tab:{code:9,name:"Tab"},K_Cap:{code:20,name:"Cap"},K_Shift:{code:16,name:"Shift"},K_Ctrl:{code:17,name:"Ctrl"},K_WinL:{code:91,name:"WinL"},K_WinR:{code:92,name:"WinR"},K_Alt:{code:18,name:"Alt"},K_Up:{code:38,name:"Up"},K_Down:{code:40,name:"Down"},K_Left:{code:37,name:"Left"},K_Right:{code:39,name:"Right"},K_BackSpace:{code:8,name:"BackSpace"},K_Enter:{code:13,name:"Enter"},K_Space:{code:32,name:"Space"},K_Esc:{code:27,name:"Esc"},K_Ins:{code:45,name:"Ins"},K_Del:{code:46,name:"Del"},K_Home:{code:36,name:"Home"},K_End:{code:35,name:"End"},K_PageUp:{code:33,name:"PageUp"},K_PageDown:{code:34,name:"PageDown"},K_Sub:{code:189,name:"Sub"},K_Plus:{code:187,name:"Plus"},K_Or:{code:229,name:"Or"},K_Ask:{code:191,name:"Ask"},K_SquareBracketL:{code:219,name:"SquareBracketL"},K_SquareBracketR:{code:221,name:"SquareBracketR"},K_NumLock:{code:144,name:"NumLock"},K_Small_Div:{code:111,name:"Small_Div"},K_Small_Mul:{code:106,name:"Small_Mul"},K_Small_Sub:{code:109,name:"Small_Sub"},K_Small_Plus:{code:107,name:"Small_Plus"}};function j(w){w["floatwidth"]=w["width"];d.call(this,w);this.maxfloatheight=EUI.toPixNumber(w.maxfloatheight,300);this.setOnChange(w.onchange);this.setAfterCancelDropDownList(w.afterCancelDropDownList);this.readOnly(false);this.comboBoxDataSource=w.datasource||new v();this.needRequireDataSource=false;this.isAutoComplete=true;this.isCaptionChange=EUI.parseBool(w.isCaptionChange,true);this._count=0;this.flag=true;this.idxs=[];this.columns=w.columns||[{id:"caption",width:"100%"}];this.setValue("");this._initAutoCompleteComboBox();}EUI.extendClass(j,d,"EAutoCompleteCombobox");j.prototype.dispose=function(){this.propertyChangeListener=null;this.comboBoxDataSource=null;this.columns=null;this.idxs=null;this.flag=null;if(this.dropdownList){this.dropdownList.dispose();this.dropdownList=null;}if(this.onchange){this.onchange=null;}this.getDom().onkeydown=null;this.getDom().onkeyup=null;this.isCaptionChange=null;d.prototype.dispose.call(this);};j.prototype._AutoCompleteComboBox_dropdownlist_dblclick=function(y,x){var w=this.dropdownList;if(w.selectedIndex==-1){return;}this.setCaption(EUI.getTextContent(y));this.showDropDownList(false);this._loadData();this.getEdit().focus();this.setValue(this.comboBoxDataSource.dataset[y.parentNode.rowIndex]["key"]);this.__onchange();if(x.stopPropagation){x.stopPropagation();}else{x.cancelBubble=true;}};j.prototype._AutoCompleteComboBox_downbtnimg_click=function(x){var w=this.dropdownList;if(this.isDisabled()){return false;}if(!this.isDropDownListVisible()){this._loadData();}this.showDropDownList(!this.isDropDownListVisible());if(x.stopPropagation){x.stopPropagation();}else{x.cancelBubble=true;}};j.prototype._initAutoCompleteComboBox=function(){var w=this;if(!this.list){var x=this.getDropDownDomObj();x.innerHTML='<div class="eui-panel-selectlist-content" style = "top:0px;"></div>';this.getDropDownFloatDiv().addBaseCss("eui-panel-selectlist");$(x).on("mousedown",function(y){y.stopPropagation();});p();this.dropdownList=new m({wnd:this.wnd,parentElement:x.firstChild,width:"100%",height:"100%",baseCss:"eui-elist-mini",needResizeColumns:false,onCellClick:function(A,z,y){w._AutoCompleteComboBox_dropdownlist_click(z);},columns:this.columns,onDblclick:function(B,A,y,z){w._AutoCompleteComboBox_dropdownlist_dblclick(A,y);}});this.dropdownList.setHeaderVisible(false);var w=this;this._regOnKeyup();}};j.prototype._AutoCompleteComboBox_dropdownlist_click=function(z){var w=self.dropdownList;var y=EUI.getTextContent(z);this.setCaption(y);this.showDropDownList(false);var x=z.parentNode.rowIndex;this.setValue(this.comboBoxDataSource.dataset[x]["key"]);this.getEdit().focus();this.__onchange();};j.prototype.getArrowClickEventBind=function(){if(!this.arrowClickEventBind){this.arrowClickEventBind=this._AutoCompleteComboBox_downbtnimg_click.bind(this);}return this.arrowClickEventBind;};j.prototype.getInputClickEventBind=j.prototype.getArrowClickEventBind;j.prototype.setOnChange=function(w){this.onchange=w;};j.prototype.enableAutoComplete=function(w){this.isAutoComplete=w==true;};j.prototype.setCaption=function(w){d.prototype.setCaption.call(this,w);};j.prototype.setNeedRequireDataSource=function(w){this.needRequireDataSource=w;};j.prototype._requireDataSource=function(){if(this.needRequireDataSource){this.requireDataSource();this.setNeedRequireDataSource(false);}};j.prototype.requireDataSource=function(){};j.prototype.clearAllData=function(){this.comboBoxDataSource.clear();if(this.dropdownList){this.dropdownList.clear();}this.setValue();this.setCaption();this.flag=true;};j.prototype._loadData=function(){this._requireDataSource();if(!this.comboBoxDataSource){return;}try{var w=this.getCaption();if(!this.isAutoComplete){w="";}var C=this.comboBoxDataSource.getData();var y=this.comboBoxDataSource.count();if(this.flag){for(var x=0;x<y;x++){var A={"caption":C[x]["value"]};this.dropdownList.addRow(A);}this.flag=false;}else{this.dropdownList.filter((this._filterfunc)?this._filterfunc.bind(this):w);}this.idxs=[];for(var x=0;x<y;x++){var z=this.dropdownList.getRow(x);if(!EUI.hasClassName(z,"eui-hide")){this.idxs.push(x);}}this.__adjustDropdownListBounds();}catch(B){EUI.showError(B);}};j.prototype.getCount=function(){return this._count;};j.prototype._getDropdownListScrollHeight=function(){var x=this.getDropDownFloatDiv().getBaseDom();x.style.height="";var w=0,y=this.dropdownList;w+=y.getRealHeight();return w+12;};j.prototype.showDropDownList=function(w){d.prototype.showDropDownList.call(this,w);};j.prototype._comboBox$EditOnChange=function(){};j.prototype._AutoCompleteComboBox_dom_keyup=function(E){var B=this,w=B.dropdownList.startindex,x=B.comboBoxDataSource.dataset,D=B.dropdownList;if(!B.isAutoComplete){return;}var H=E.keyCode;if((E.ctrlKey&&H===r.K_Ctrl.code)||E.altKey||E.shiftKey||((H==r.K_Tab.code||H==r.K_Enter.code)&&!EUI.isNumber(w))||H==r.K_Alt.code||H==r.K_Shift.code){return;}if(H==r.K_Esc.code){B.showDropDownList(false);return;}if(H!=r.K_Up.code&&H!=r.K_Down.code&&H!=r.K_Enter.code){var I=D.getRow(w);var F=EUI.getTextContent(I);B._loadData();D.scrollToView(F);B.showDropDownList(true);var y=B.getCaption();D.selectRow(w);if(y!==F){B.setValue("");}if(!y){B.setCaption("");}}else{B.showDropDownList(true);}var z=B.idxs.indexOf(w);if(D.startindex==-1){return;}if(H==r.K_Up.code){if(!EUI.isNumber(w)&&z==-1){return;}if(w>0&&z>0){z=B.idxs[z-1];}else{z=w;}var I=D.getRow(z);var F=EUI.getTextContent(I);D.scrollToView(F);D.selectRow(z);var A=D.getSelectRow().rowIndex;if(B.isCaptionChange){B.setValue(x[A]["key"]);B.setCaption(F);}B.__onchange();}else{if(H==r.K_Down.code){if((w<D.getCount()-1)&&(z<this.idxs.length-1)){z=B.idxs[z+1];}else{z=w;}var I=D.getRow(z);var F=EUI.getTextContent(I);D.scrollToView(F);D.selectRow(z);var A=D.getSelectRow().rowIndex;if(B.isCaptionChange){B.setCaption(F);B.setValue(x[A]["key"]);}B.__onchange();}else{if(H==r.K_Enter.code||H==r.K_Tab.code){if(z==-1){return;}var I=D.getRow(w);var F=EUI.getTextContent(I);var G=B.getCaption();var A=D.getIndex(G);if(A!==w&&F.indexOf(G)==-1){var C=this.idxs[0];var G=x[C]["value"];D.selectRow(C);B.setCaption(G);B.setValue(x[C]["key"]);}else{B.setCaption(F);B.setValue(x[I.rowIndex]["key"]);}B.__onchange();B.showDropDownList(false);}}}if(E.stopPropagation){E.stopPropagation();}else{E.cancelBubble=true;}if(E.preventDefault){E.preventDefault();}else{E.returnValue=false;}return false;};j.prototype._regOnKeyup=function(){this.getDom().onkeydown=function(w){if(this.dropdownList.startindex==-1){return;}var x=w.keyCode;if(x==r.K_Enter.code||x==r.K_Tab.code){this.showDropDownList(false);if(w.stopPropagation){w.stopPropagation();}else{w.cancelBubble=true;}if(w.preventDefault){w.preventDefault();}else{w.returnValue=false;}return false;}}.bind(this);this.getDom().onkeyup=this._AutoCompleteComboBox_dom_keyup.bind(this);};j.prototype.clearComboBosDataSource=function(){this.comboBoxDataSource=null;};j.prototype.setComboBoxDataSource=function(w){this.comboBoxDataSource=w;};j.prototype.getComboBoxDataSource=function(){return this.comboBoxDataSource;};j.prototype.addData=function(w,x){var w=arguments[0];var y=arguments[1];if(arguments.length==1){this.comboBoxDataSource.addData(w);}else{if(arguments.length==2){this.comboBoxDataSource.addData(w,y);}}};j.prototype.loadData=function(){this._loadData();};j.prototype.__onchange=function(){if(!!this.onchange){this.onchange(this.getValue(),this.getCaption());}if(this.propertyChangeListener!=null){this.propertyChangeListener.propertyChanged(true,null);}};j.prototype.__itemselected=function(){if(!!this.itemselected){this.itemselected(this.getValue(),this.getCaption());}};j.prototype.onchange=function(){};j.prototype.itemselected=function(){};function v(){this.dataset=new Array();}v.prototype.count=function(){return this.dataset.length;};v.prototype.getData=function(x){if(arguments.length==0){return this.dataset;}if(typeof(x)=="string"){for(var w=0;w<this.dataset.length;w++){if(this.dataset[w]["key"]==x){return this.dataset[w];}}}else{return this.dataset[x];}};v.prototype.addData=function(){if(arguments.length==1){var w=arguments[0];var y=arguments[0];var x={"value":y,"key":w};this.dataset.push(x);}else{if(arguments.length==2){var w=arguments[0];var y=arguments[1];var x={"value":y,"key":w};this.dataset.push(x);}}};v.prototype.removeData=function(x){if(typeof(x)=="string"){for(var w=0;w<this.dataset.length;w++){if(this.dataset[w]["key"]==x){this.dataset.splice(w,1);}}}else{this.dataset.splice(x,1);}};v.prototype.clear=function(){var w=new Array();this.dataset=null;this.dataset=w;};v.prototype.indexOf=function(x){if(!x||x.length==0){return -1;}try{for(var w=0;w<this.dataset.length;w++){if(this.dataset[w]["value"]==x||this.dataset[w]["key"]==x){return w;}}}catch(y){}return -1;};function a(w){w.floatwidth=200;d.call(this,w);this.setFontName("微软雅黑");}EUI.extendClass(a,d,"EFontCombobox");a.prototype.dispose=function(){this.onchange=null;if(this._fontList){this._fontList.dispose();this._fontList=null;}d.prototype.dispose.call(this);};a.prototype._initDropDownDom=function(){if(this._fontList){return;}var w=this.getDropDownDomObj();EUI.addClassName(w,"eui-scroll-auto");t();var x=new h({wnd:this.wnd,parentElement:w,width:"100%",height:"100%"});var z=this.getFontName();this._fontList=x;x.addGroupElement(false,"");EUI.addClassName(x.getContent(),"eui-listbox-vertical");f.forEach(function(C,A){var B=x.addItem('<a class="eui-link-box" style="padding-left: 0px;"><span title = "'+C+'" style="font-family: '+C+';">'+C+"</span></a>",0);B._fontname=C;if(z===C){x.setItemFocus(B,null,true);}});var y=x.getContent();y.style.cssText+=";margin-top:-5px;padding:15px 10px 0 10px;";y.firstChild.style.cssText+=";margin:0px;";this._fontList.setOnClick(this._XFontNameListOnClickCallback.bind(this));};a.prototype._XFontNameListOnClickCallback=function(w,x,y){this.setFontName(x._fontname);if(typeof(this.onchange)=="function"){this.onchange(this);}this.showDropDownList(false);};a.prototype.getFontName=function(){return this.getValue();};a.prototype.setFontName=function(B,z){if(EUI.isString(B)){if(B.charAt(0)==='"'){B=B.substr(1,B.length-1);}if(this.getValue()!==B){this.setValue(B);this.setCaption(B);if(this._fontList){var y=f.indexOf(B),x=this._fontList,w=x.getFocusItem(),A=x.getItem(y,0);if(w!==A){x.setItemFocus(A,null,true);}}}}};a.prototype.setOnChange=function(w){this.onchange=w;};function q(w){w.floatwidth=200;d.call(this,w);this.setFontSize(12);this.readOnly(false);}EUI.extendClass(q,d,"EFontSizeCombobox");q.prototype.dispose=function(){this.onchange=null;if(this._fontList){this._fontList.dispose();this._fontList=null;}d.prototype.dispose.call(this);};q.prototype._initDropDownDom=function(){if(this._fontList){return;}var w=this.getDropDownDomObj();EUI.addClassName(w,"eui-scroll-auto");t();var x=new h({wnd:this.wnd,parentElement:w,width:"100%",height:"100%"});var A=this.getFontSize();this._fontList=x;x.addGroupElement(false,"");EUI.addClassName(x.getContent(),"eui-listbox-vertical");s.forEach(function(D,B){var C=x.addItem('<a class="eui-link-box" style="padding-left: 0px;"><span>'+D+"</span></a>",0);C._fontsize=D;if(A===D){x.setItemFocus(C,null,true);}});var z=x.getContent();z.style.cssText+=";margin-top:-5px;padding:15px 10px 0 10px;";z.firstChild.style.cssText+=";margin:0px;";this._fontList.setOnClick(this._XFontSizeListOnClickCallback.bind(this));var y=this;y.__onchange=function(B){var C=B.getFontSize();B.setFontSize(C);if(typeof(B.onchange)=="function"){B.onchange(B);}};};q.prototype._XFontSizeListOnClickCallback=function(w,x,y){this.setFontSize(x._fontsize);if(typeof(this.onchange)=="function"){this.onchange(this);}this.showDropDownList(false);};q.prototype.setOnChange=function(w){this.onchange=w;};q.prototype.getFontSize=function(){return this.getValue();};q.prototype.setFontSize=function(B,z){if(isNaN(B)||B===null){B="";}this.setValue(B);this.setCaption(B);if(this._fontList){var y=s.indexOf(B),x=this._fontList,w=x.getFocusItem(),A=x.getItem(y,0);if(w!==A){x.setItemFocus(A,null,true);}}};function p(){if(!m){m=require("eui/modules/elist").EList;}}function t(){if(!h){h=require("eui/modules/elistbox").EListBox;}}return{ECombobox:d,EListCombobox:k,EEditCombobox:g,EListBoxCombobox:n,EAutoCompleteCombobox:j,EComboBoxDataSource:v,EFontCombobox:a,EFontSizeCombobox:q};});