define(["eui/modules/uibase","eui/modules/ecombobox"],function(af,E){var c=af.EComponent,J=E.ECombobox;var d=/([\d|-]{4})(?:[^\d-]*)(?:-?(\d{1,2}|--)(?:[^\d-]*)(?:-?(\d{1,2}|--)(?:[^\d-]*))?)?/;var y=/(\d{1,2}):(\d{1,2}):(\d{1,2})/;var an=["hour","minute","second"];var w=["一季度","二季度","三季度","四季度"];var u=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"];var s=[I18N.getString("xui.ctrls.xcalendar.js.1","日"),I18N.getString("xui.ctrls.xcalendar.js.2","一"),I18N.getString("xui.ctrls.xcalendar.js.3","二"),I18N.getString("xui.ctrls.xcalendar.js.4","三"),I18N.getString("xui.ctrls.xcalendar.js.5","四"),I18N.getString("xui.ctrls.xcalendar.js.6","五"),I18N.getString("xui.ctrls.xcalendar.js.7","六")];var aq=[["时",24],["分",60],["秒",60]];var N="选择时间";var B="返回日期";function o(aA){aA=aA||{};var aC=aA["parentElement"];var az=null,a2=null;if(aC){if(EUI.isString(aC)){az=aA.wnd||window,a2=document;aC=a2.getElement(aC)||a2.body;}else{if(aC.nodeType===1){a2=aC.ownerDocument,az=a2.parentWindow||a2.defaultView;}}}if(az===null){az=aA.wnd||window,a2=document,aC=a2.body;}c.call(this,{wnd:az,parentElement:aC});var aN=aC.appendChild(a2.createElement("div"));aN.className="eui-calendar-container "+(aA.cls||"");var aZ=[];aZ.push('<div class="eui-calendar-main">');aZ.push('<div class="eui-calendar-header">');aZ.push('<i class="eui-icon eui-calendar-prev-y"></i><i class="eui-icon eui-calendar-prev-m"></i>');aZ.push('<div class="eui-calendar-set-ym"><span></span>');aZ.push("<span></span></div>");aZ.push('<i class="eui-icon eui-calendar-next-m"></i><i class="eui-icon eui-calendar-next-y"></i>');aZ.push("</div>");aZ.push('<div class="eui-calendar-content"></div>');aZ.push("</div></div>");aZ.push('<div class="eui-calendar-footer eui-hide">');aZ.push('<div class="eui-btn-container">');aZ.push('<button type="button" class="eui-btn eui-btn-m eui-btn-text eui-float-left eui-hide">'+N+"</button>");aZ.push('<button type="button" class="eui-btn eui-btn-m">清除</button>');aZ.push('<button type="button" class="eui-btn eui-btn-m eui-btn-primary">确定</button>');aZ.push("</div></div>");aN.innerHTML=aZ.join("");var aV=aN.firstChild.lastChild,aE=aN.firstChild.firstChild.firstChild,aD=aE.nextSibling,aX=aD.nextSibling.firstChild,aW=aX.nextSibling,aL=aD.nextSibling.nextSibling,aJ=aL.nextSibling,aP=aN.lastChild,aI=aP.firstChild.firstChild,aF=aI.nextSibling,a1=aF.nextSibling,aY=aN.firstChild;if(EUI.browser.isMobile){aE.style.display="none";aJ.style.display="none";}var ay=[],aH=parseInt(aA["row"],10)||1,aB=parseInt(aA["col"],10)||1;if(aA.dateType==="date"){aV.innerHTML="<table></table>";aV=aV.firstChild;for(var aT=0;aT<aH;aT++){var aK=aV.insertRow(-1);for(var aR=0;aR<aB;aR++){var ax=aK.insertCell(-1);ax.className="eui-calendar-cell";ay.push(ax);}}}else{if(aA.dateType==="time"){aV.innerHTML='<ul class="eui-calendar-list eui-calendar-list-'+aA.dateType+'"></ul>';aV=aV.firstChild;for(var aT=0;aT<aq.length;aT++){var aO=aV.appendChild(this.doc.createElement("li"));var aS=aO.appendChild(this.doc.createElement("span"));aS.innerHTML=aq[aT][0];var aM=aO.appendChild(this.doc.createElement("ol"));for(var aR=0;aR<aq[aT][1];aR++){var ax=aM.appendChild(this.doc.createElement("li"));ax.innerHTML=aR<10?"0"+aR:aR;ax.className="eui-calendar-cell";ay.push(ax);}}}else{aV.innerHTML='<ul class="eui-calendar-list eui-calendar-list-'+aA.dateType+'"></ul>';aV=aV.firstChild;for(var aT=0;aT<aH*aB;aT++){var ax=aV.appendChild(this.doc.createElement("li"));ax.className="eui-calendar-cell";ay.push(ax);}EUI.addClassName(aW,"eui-hide");}}var aG=this._property={container:aN,contentMain:aY,contentTable:aV,headdom:aN.firstChild.firstChild,btncontainer:aP,timeBtn:aI,clearBtn:aF,sureBtn:a1,datecells:ay,prebtn1:aE,prebtn2:aD,leftTextcell:aX,rightTextcell:aW,nextbtn1:aL,nextbtn2:aJ,disabledcells:[],minDate:false,maxDate:false,enableclear:false,value:null};if(aA.dateType!=="date"){this.setMonthBtnVisible(false);}if(aA.dateType==="time"){this.setTimerBtnHide();}var a0=aA["initnames"];if(a0){for(var aT=0,aU=a0.length;aT<aU;aT++){aG[a0[aT]]=-1;}}var aQ=aA["value"];if(aQ!==false){this.setValue(aQ);}$(aN).bind("mousedown.calendar",this,n).bind("mouseup.calendar",this,T).bind("mouseleave.calendar",this,z);EUI.disableDocTextSelect(aN);if(aA.disabled){this.setDisabled(true);}}EUI.extendClass(o,c,"Calendar");o.YEAR_MIN=1900;o.prototype.dispose=function(){var ax=this._property;$(ax["container"]).unbind(".calendar").remove();this.wnd=null;this.doc=null;this._property=null;};o.prototype.setMousedownEvt=function(ax){this._property.mousedown_evt=ax;};o.prototype.setMonthBtnVisible=function(ax){var aA=this._property,ay=aA.prebtn2,az=aA.nextbtn1;if(ax){EUI.removeClassName(ay,"eui-hide");EUI.removeClassName(az,"eui-hide");}else{EUI.addClassName(ay,"eui-hide");EUI.addClassName(az,"eui-hide");}};o.prototype.setTimerBtnHide=function(){var ax=this._property;EUI.addClassName(ax.prebtn1,"eui-hide");EUI.addClassName(ax.prebtn2,"eui-hide");EUI.addClassName(ax.nextbtn1,"eui-hide");EUI.addClassName(ax.nextbtn2,"eui-hide");EUI.addClassName(ax.prebtn1,"eui-hide");EUI.addClassName(ax.rightTextcell,"eui-hide");};o.prototype.setFooterVisible=function(ax){var az=this._property,ay=az.btncontainer;if(ax){EUI.removeClassName(ay,"eui-hide");}else{EUI.addClassName(ay,"eui-hide");}};o.prototype.enableTime=function(ax){var az=this._property,ay=az.timeBtn,ax=EUI.parseBool(ax,false);if(ax){EUI.removeClassName(ay,"eui-hide");}else{EUI.addClassName(ay,"eui-hide");}az["enabletime"]=ax;};o.prototype.getBaseDom=function(){return this._property["container"];};o.prototype.getContainer=o.prototype.getBaseDom;o.prototype.getValue=function(){return this._property["value"];};o.prototype.setValue=function(ax){this._property["value"]=ax;};o.prototype.next=function(){};o.prototype.previous=function(){};o.prototype.setDatePeriod=function(ay,az){var ax=this._property;ax["minDate"]=ay;ax["maxDate"]=az;};o.prototype.getDatePeriod=function(){var ax=this._property;return[ax["minDate"],ax["maxDate"]];};o.prototype.enableClear=function(ax){return;var ay=this._property;if((ax=EUI.parseBool(ax,true))===ay["enableclear"]){return;}ay["clearCell"].style.display=(ay["enableclear"]=ax)?"":"none";};o.prototype.setOnClick=function(ax){var ay=this._property;ay["onclick"]=typeof(ax)==="function"?ax:null;ay["args4click"]=arguments[1];};o.prototype.setOnClear=function(ay){var ax=this._property;ax["onclear"]=typeof(ay)==="function"?ay:null;ax["args4clear"]=arguments[1];};function F(ay){if(!ay){return;}var ax=ay.offsetHeight,aB=ay.parentNode,aA=aB.scrollHeight,aD=aB.offsetHeight,az=parseInt(EUI.getTextContent(ay),10);var aC=az*ax-(aD-ax)/2;aB.scrollTop=aC;}function e(ay,aE,aN,aI){var aB=aE._property;if(EUI.isArray(ay)){for(var aK=0;aK<ay.length;aK++){var aD=ay[aK];var aA=an[aK];var aL=aB["checkedcell_"+aA];if(aL!==aD){if(aL){EUI.removeClassName(aL,"eui-calendar-checked");}aB["checkedcell_"+aA]=aD;EUI.addClassName(aD,"eui-calendar-checked");F(aD);}}}else{if(EUI.browser.isMobile){var aH=aB.args4clear;var aP=aB["checkedstartcell"];var az=aB["checkedendcell"];if(aP){if(az){if(aB["_hovertype_"]!=2&&aB["_hovertype_"]!=3){EUI.removeClassName(aP,"eui-calendar-checked-start");EUI.removeClassName(aP,"eui-calendar-checked-startcell");EUI.removeClassName(az,"eui-calendar-checked-end");aB["checkedstartcell"]=ay;aB["checkedendcell"]=null;aB.start_value=aI;aB.end_value="";aB["start_index"]=aB["datecells"].indexOf(aP);aB["end_index"]=null;EUI.addClassName(ay,"eui-calendar-checked-start");}var ax=parseInt(aB["start_value"].substr(4,2));if(aB["end_value"]){var aG=parseInt(aB["end_value"].substr(4,2));}if(aB["_hovertype_"]==0){ab(false,aE);}if(aB["_hovertype_"]==2||aB["_hovertype_"]==3){var aJ=parseInt(aB["start_value"].substr(0,4));if(aJ==aB["year"]){if(ax>aB["month"]&&aG<aB["month"]){ab(false,aE);}}}}else{if(aB["_hovertype_"]!=2&&aB["_hovertype_"]!=3){if(parseInt(aI)>parseInt(aB["start_value"])){aB["checkedendcell"]=ay;aB.end_value=aI;EUI.addClassName(ay,"eui-calendar-checked-end");EUI.addClassName(aP,"eui-calendar-checked-startcell");aB["start_index"]=aB["datecells"].indexOf(aP);aB["end_index"]=aB["datecells"].indexOf(aB["checkedendcell"]);var ax=parseInt(aB["start_value"].substr(4,2)),aG=parseInt(aB["end_value"].substr(4,2)),aM=parseInt(aB["start_value"].substr(6,2)),aF=parseInt(aB["end_value"].substr(6,2));if(ax==aG){ab(true,aE,aB["start_index"],aB["end_index"]);}if(ax!=aB["month"]){EUI.removeClassName(aP,"eui-calendar-checked-start");EUI.removeClassName(aP,"eui-calendar-checked-startcell");}if(!EUI.isNumber(aB["_hovertype"])&&ax!=aG){var aC=P(aB["year"],aB["month"]-1==0?12:aB["month"]-1);var aO=(aB["end_index"]-aF)-(aC-aM);if(aO>=0){ab(true,aE,aO,aB["end_index"]);aB["checkedstartcell"]=aB["datecells"][aO];EUI.addClassName(aB["checkedstartcell"],"eui-calendar-checked-start");}else{ab(true,aE,0,aB["end_index"]);}}}else{EUI.removeClassName(aP,"eui-calendar-checked-start");EUI.removeClassName(aP,"eui-calendar-checked-startcell");aB["checkedstartcell"]=ay;aB.start_value=aI;aB["start_index"]=aB["datecells"].indexOf(aB["checkedstartcell"]);EUI.addClassName(ay,"eui-calendar-checked-start");}}}}else{if(aB["_hovertype_"]!=2&&aB["_hovertype_"]!=3){aB["checkedstartcell"]=ay;aB.start_value=aI;aB["start_index"]=aB["datecells"].indexOf(aB["checkedstartcell"]);EUI.addClassName(ay,"eui-calendar-checked-start");}}}else{var aL=aB["checkedcell"];if(aL!==ay){if(aL){EUI.removeClassName(aL,"eui-calendar-checked");}aB["checkedcell"]=ay;EUI.addClassName(ay,"eui-calendar-checked");}}}if(aN){var aQ=aB["onclick"];if(aQ){aQ(aB["value"],aE,aB["args4click"]);}}}function ab(ay,az,aD,ax){if(!EUI.isBoolean(ay)){return;}var aH=az._property,aC=aH["datecells"];if(!aH["checkcells"]){aH["checkcells"]=[];}if(ay){var aB=aD==0?ax-aD:ax-aD-1;for(var aA=0;aA<aB;aA++){var aG=aD==0?aC[aA+aD]:aC[aA+aD+1];EUI.addClassName(aG,"eui-calendar-cell-checked");aH["checkcells"].push(aG);}if(aH["_hovertype_"]==0){var aF=aH["args4click"];var aE=aH.start_value+"-"+aH.end_value;aF.setValue(aE);}}else{for(var aA=aH["checkcells"].length-1;aA>=0;aA--){var aG=aH["checkcells"][aA];EUI.removeClassName(aG,"eui-calendar-cell-checked");aH["checkcells"].removeAt(aA);}}}function x(aG,aC,aB,aE,az){if(aE["_hovertype_"]==0){if(aE["checkedstartcell"]){var aD=parseInt(aE["start_value"].substr(4,2));if(aE["checkedendcell"]&&aB!=aD){var aA=parseInt(aE["start_value"].substr(6,2)),aF=parseInt(aE["end_value"].substr(6,2));var ay=P(aE["year"],aE["month"]-1==0?12:aE["month"]-1);var ax=(aE["end_index"]-aF)-(ay-aA);if(ax>=0){ab(true,az,ax,aE["end_index"]);aE["checkedstartcell"]=aE["datecells"][ax];EUI.addClassName(aE["checkedstartcell"],"eui-calendar-checked-start");EUI.addClassName(aE["checkedstartcell"],"eui-calendar-checked-startcell");}else{ab(true,az,0,aE["end_index"]);}}}}}function ap(az,ay,aB,aC){var aD=aC["disabledcells"];for(var aA=0,ax=aD.length;aA<ax;aA++){EUI.removeClassName(aD[aA],"eui-calendar-cell-disabled");}aD.length=0;ai(az,0,ay,aD,aC,true);if(aB>=0){ai(az,aB+1,az.length,aD,aC,false);}else{if(aC["disablenext"]){EUI.removeClassName(aC["btnnext"],"calendar-btn-next-disabled");aC["disablenext"]=false;}}}function ai(az,ay,aB,aE,aC,aD){if(ay>aB){if(aD){if(aC["disableprevious"]){EUI.removeClassName(aC["btnprevious"],"calendar-btn-previous-disabled");aC["disableprevious"]=false;}}else{if(aC["disablenext"]){EUI.removeClassName(aC["btnnext"],"calendar-btn-next-disabled");aC["disablenext"]=false;}}return;}if(aD){if(!aC["disableprevious"]){EUI.addClassName(aC["btnprevious"],"calendar-btn-previous-disabled");aC["disableprevious"]=true;}}else{if(!aC["disablenext"]){EUI.addClassName(aC["btnnext"],"calendar-btn-next-disabled");aC["disablenext"]=true;}}for(var aA=ay;aA<aB;aA++){var ax=az[aA];EUI.addClassName(ax,"eui-calendar-cell-disabled");aE.push(ax);}}function n(aF){var az=aF.data,aE=az._property,aB=aF.target,ax=aB.tagName;var ay=aE["mousedown_evt"];if(EUI.isFunction(ay)){ay(az,aF);}if(az.isDisabled()){return;}if(!(ax==="I"||ax==="SPAN"||ax==="BUTTON"||EUI.hasClassName(aB,"eui-calendar-cell"))){aB=null;}var aD=aE["_hovertype_"],aG=aE["_hovercell_"];if(aD>-1){if(aB===aG){return;}aw(aD,aG,aE,az,aF);}if(aB){if(aB.className.indexOf("eui-calendar-cell")!==-1){if(EUI.hasClassName(aB,"eui-calendar-cell-disabled")){aD=-1;}else{aD=0;}}else{if(aB===aE["prebtn1"]){if(aE["disableprevious"]){aD=-1;}else{aD=1;}}else{if(aB===aE["prebtn2"]){if(aE["disableprevious"]){aD=-1;}else{aD=2;}}else{if(aB===aE["nextbtn1"]){if(aE["disablenext"]){aD=-1;}else{aD=3;}}else{if(aB===aE["nextbtn2"]){if(aE["disablenext"]){aD=-1;}else{aD=4;}}else{if(aB===aE["clearBtn"]){aD=7;}else{if(aB===aE["sureBtn"]){aD=8;}else{if(aB===aE["timeBtn"]){var aA=aB.getAttribute("timetype");if(aA==="date"){aF.stopPropagation();}aD=9;}else{var aC=aE["_evt_on_mouse"];aD=aC?aC(null,aB,az,aF):-1;}}}}}}}}}aE["_hovertype_"]=aD;aE["_hovercell_"]=aB;}function T(ax){var aE=ax.data,aC=aE._property,aB=aC["_hovertype_"];switch(aB){case 0:var ay=aC["_hovercell_"];aE.setValue(aC["datecells"].indexOf(ay),true);aC["_hovertype_"]=-1;break;case 1:aE.previousYear(aB);if(aC["disableprevious"]){aC["_hovertype_"]=-1;}break;case 2:aE.previous(aB);if(aC["disableprevious"]){aC["_hovertype_"]=-1;}break;case 3:aE.next(aB);if(aC["disablenext"]){aC["_hovertype_"]=-1;}break;case 4:aE.nextYear(aB);if(aC["disablenext"]){aC["_hovertype_"]=-1;}break;case 7:var aD=aC["onclear"];if(aD){aD(aE,aC["args4clear"]);}else{aE.setValue();}aC["_hovertype_"]=-1;break;case 8:var az=aC["onclick"];if(az){az(aC["value"],aE,aC["args4click"]);}aC["_hovertype_"]=-1;break;default:if(aB!==-1){var aA=aC["_evt_on_mouse"];if(aA){if((aB=aA(aB,null,aE,ax)===-1)){aC["_hovertype_"]=-1;}}}}}function z(ax){var az=ax.data,ay=az._property;aw(ay["_hovertype_"],ay["_hovercell_"],ay,az,ax);ay["_hovertype_"]=-1;}function aw(aB,ay,aA,aC,ax){return;switch(aB){case 0:case 1:case 2:case 3:case 4:break;default:if(aB!==-1){var az=aA["_evt_on_mouse"];if(az){az(aB,ay,aC,ax);}}}}function ar(aA){var ay=[aA],aB=null;for(var az=1,ax=arguments.length;az<ax;az++){aB=arguments[az];ay.push(aB<10?"0"+aB:aB);}return ay.join("");}function l(){var ay=[],aA=null;for(var az=0,ax=arguments.length;az<ax;az++){aA=parseInt(arguments[az],10);ay.push(aA<10?"0"+aA:aA);}return ay.join(":");}function a(aA,ax,az){for(var ay=0;ay<15;ay++){EUI.setTextContent(az[ay],ax+ay);}aA["startYear"]=ax;var aB=aA["endYear"]=ax+14;EUI.setTextContent(aA["leftTextcell"],ax+"年"+" — "+aB+"年");ap(az,aA["minYear"]-ax,aA["maxYear"]-ax,aA);}function v(az,ay,ax,aA){EUI.setTextContent(az["leftTextcell"],(az["year"]=ay)+" 年");ap(az["datecells"],ay===az["minYear"]?az[ax]:-1,ay===az["maxYear"]?az[aA]:-1,az);}function K(aA,ax,aF,aK,aL,aB){var aI=this._property;am(aA,aI,"minYear",aF,aB);am(ax,aI,"maxYear",aK,aB);var aH=aI["minYear"],aD=aI[aF],aC=aI["maxYear"],az=aI[aK],aG=aI["year"],aE=aI[aL],aJ=null,ay=null;if(aH!==-1){if(aC!==-1){if(aC<aH){aC=aI["maxYear"]=aH;}if(az!==-1&&aC===aH&&az<aD){az=aI[aK]=aD;}}if(aH>aG){aJ=aH;}else{if(aH===aG&&aD!==-1&&aD>aE){ay=aD;}}}if(aC!==-1){if(aJ===null&&aG>aC){aJ=aC;}else{if(ay===null&&az<aE){ay=az;}}}if(aJ!==null){this.setValue(aJ);}else{if(ay!==null){this.setValue(ay);}else{ap(aI["datecells"],aH===aG?aD:-1,aC===aG?az:-1,aI);}}o.prototype.setDatePeriod.call(this,aH===-1?false:ar(aH,aD+1),aC===-1?false:ar(aC,az+1));}function am(az,aE,aC,aB,ay){if(az===false){aE[aC]=aE[aB]=-1;}else{if(az){if(az.match){var aA=az.match(d);if(aA){var aD=parseInt(aA[1],10),ax=null;if(aD>=o.YEAR_MIN){aE[aC]=aD;ax=parseInt(aA[2],10);if(ax>0&&ax<=ay){aE[aB]=ax-1;}else{if(aE[aB]===-1){aE[aB]=0;}}}else{if(aD>0&&aD<=ay){aE[aB]=aD-1;}}}}else{var aD=parseInt(az,10);if(!isNaN(aD)){if(aD>=o.YEAR_MIN){aE[aC]=aD;if(aE[aB]===-1){aE[aB]=0;}}else{if(aD>=0&&aD<ay){aE[aB]=aD;}}}}}}}function X(aK,aN,az,aA,aE,aR){var aG=null,aB=null,aO=aK===""||aK===false;if(aO||aK==null){var aP=new Date(),aS=12/aE;aG=aP.getFullYear();aB=aP.getMonth();if(aS!==1){aB=Math.ceil(aB/aS);}}else{if(aK.match){var aL=aK.match(d);if(!aL){return;}aG=parseInt(aL[1],10);if(aG<o.YEAR_MIN){return;}aB=aL[2];if(aB){aB=parseInt(aB,10);if(aB<1||aB>aE){aB=1;}}}else{aK=parseInt(aK,10);if(isNaN(aK)){return;}if(aK>=o.YEAR_MIN){aG=aK;}else{if(aK>=0||aK<aE){aB=aK+1;}else{return;}}}}var aC=this._property,aQ=aC["minYear"],ax=aC["maxYear"],aT=aC[aN]+1,aD=aC[az]+1,aF=true;if(aG==null){if(aG=aC["year"]){aF=false;}else{aG=(new Date()).getFullYear();}}if(aF){if(aQ!==-1&&aQ>aG){aG=aQ;if(aT!==0){aB=aT;}}else{if(ax!==-1&&ax<aG){aG=ax;if(aD!==0){aB=aD;}}}if(aG!==aC["year"]){EUI.setTextContent(aC["leftTextcell"],(aC["year"]=aG)+" 年");}}if(aB==null){aB=Math.max(aC[aA],0)+1;}var aI=aC["datecells"],aM=-1,aJ=-1;if(aG===aQ){if(aT!==0){if(aT>aB){aB=aT;}aM=aT-1;}}if(aG===ax){if(aD!==0){if(aD<aB){aB=aD;}aJ=aD-1;}}var aH=null,ay=null;if(aO){aC[aA]=-1;}else{aH=ar(aC["year"],aB);ay=aI[aC[aA]=aB-1];}aC["value"]=aH;e(ay,this,aR);ap(aI,aM,aJ,aC);}function P(ax,ay){switch(ay){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 4:case 6:case 9:case 11:return 30;case 2:return((ax%4==0)&&(ax%100!=0)||(ax%400==0))?29:28;}}function av(aB,aF,aO,aD,aG){EUI.setTextContent(aD.leftTextcell,(aD["year"]=aF)+"年");EUI.setTextContent(aD["rightTextcell"],(aD["month"]=aO)+"月");var aM=new Date(aF,aO-1,1),aN=(aM.getDay()||7)-1,aE=P(aF,aO),aJ=aO===1?P(aF-1,12):P(aF,aO-1),aH=0;for(;aH<=aN;aH++){var az=aB[aH];EUI.setTextContent(az,aJ-aN+aH);EUI.addClassName(az,"eui-calendar-out");}for(var aK=1;aK<=aE;aK++){var az=aB[aH++];EUI.setTextContent(az,aK);EUI.removeClassName(az,"eui-calendar-out");}for(var aK=1,aL=aB.length;aH<aL;aK++,aH++){var az=aB[aH];EUI.setTextContent(az,aK);EUI.addClassName(az,"eui-calendar-out");}if(EUI.browser.isMobile){if(aD["_hovertype_"]==2||aD["_hovertype_"]==3){if(aD["checkedstartcell"]){var ay=parseInt(aD["start_value"].substr(4,2));if(aO!=ay){EUI.removeClassName(aD["checkedstartcell"],"eui-calendar-checked-start");}else{EUI.addClassName(aD["checkedstartcell"],"eui-calendar-checked-start");if(aD["checkedendcell"]){var aI=parseInt(aD["end_value"].substr(4,2));aD["end_day"]=parseInt(aD["end_value"].substr(6,2));aD["start_day"]=parseInt(aD["start_value"].substr(6,2));ab(false,aG);if(aD["start_index"]+aD["end_day"]>42||aI-ay>1){ab(true,aG,aD["start_index"],42);EUI.addClassName(aD["checkedstartcell"],"eui-calendar-checked-startcell");}else{if(aI-ay==1||(aI==1&&ay==12)||(aI==12&&ay==1)){var ax=aE-aD["start_day"]+aD["end_day"];if(aD["checkedstartcell"]!=aB[aD["start_index"]]){EUI.removeClassName(aD["checkedstartcell"],"eui-calendar-checked-start");EUI.removeClassName(aD["checkedstartcell"],"eui-calendar-checked-startcell");aD["checkedstartcell"]=aB[aD["start_index"]];}ab(true,aG,aD["start_index"],ax+aD["start_index"]);EUI.removeClassName(aD["checkedendcell"],"eui-calendar-checked-end");if(ax+aD["start_index"]<aB.length-1){aD["checkedendcell"]=aB[ax+aD["start_index"]];EUI.addClassName(aD["checkedendcell"],"eui-calendar-checked-end");}EUI.addClassName(aD["checkedstartcell"],"eui-calendar-checked-start");EUI.addClassName(aD["checkedstartcell"],"eui-calendar-checked-startcell");var aA=true;}}}}}if(aD["checkedendcell"]){var aI=parseInt(aD["end_value"].substr(4,2));if(aO!=aI){if(!aA&&ay!=aO){EUI.removeClassName(aD["checkedendcell"],"eui-calendar-checked-end");EUI.removeClassName(aD["checkedstartcell"],"eui-calendar-checked-startcell");}if(ay!=aO){ab(false,aG);}}else{EUI.removeClassName(aD["checkedendcell"],"eui-calendar-checked-end");EUI.removeClassName(aD["checkedstartcell"],"eui-calendar-checked-startcell");aD["checkedendcell"]=aB[aD["end_index"]];EUI.addClassName(aD["checkedendcell"],"eui-calendar-checked-end");ab(false,aG);if(ay==aI){EUI.addClassName(aD["checkedstartcell"],"eui-calendar-checked-startcell");ab(true,aG,aD["start_index"],aD["end_index"]);}else{var aC=P(aF,ay);var aP=(aD["end_index"]-aD["end_day"])-(aC-aD["start_day"]);if(aP>=0){aD["checkedstartcell"]=aB[aP];EUI.addClassName(aD["checkedstartcell"],"eui-calendar-checked-start");EUI.addClassName(aD["checkedstartcell"],"eui-calendar-checked-startcell");}else{aP=0;}ab(true,aG,aP,aD["end_index"]);}}if(aO>ay&&aO<aI){ab(true,aG,0,42);}}}}ap(aD["datecells"],aD["minYear"]===aF&&aD["minMonth"]===aO?(aN+aD["minDay"]):-1,aD["maxYear"]===aF&&aD["maxMonth"]===aO?(aN+aD["maxDay"]):-1,aD);return aN;}function S(az,ay,aB,ax,aA){if(az["value"]){aA.setValue(ay,aB,ax);}else{if(az["year"]!==ay||az["month"]!==ay){az["dateidx"]=av(az["datecells"],ay,aB,az);}}}function ae(ax,aB,aA){if(ax===false){aB[aA+"Year"]=aB[aA+"Month"]=aB[aA+"Day"]=-1;}else{if(ax&&ax.match){var ay=ax.match(d);if(!ay){return;}var az=aB[aA+"Year"]=Math.max(o.YEAR_MIN,parseInt(ay[1],10)),aC=aB[aA+"Month"]=Math.min(12,parseInt(ay[2],10)||1);aB[aA+"Day"]=Math.min(P(az,aC),parseInt(ay[3],10)||1);}}}function ag(ay,aA,ax,az){ay=Math.max(o.YEAR_MIN,ay);aA=isNaN(aA)||aA<1?az["month"]:Math.min(12,aA);if(isNaN(ax)||ax<1){ax=Math.max(1,az["day"]);}ax=Math.min(P(ay,aA),ax);return h(ay,aA,ax,az);}function f(aA){var ay=[23,59,59],aB=[0,0,0];for(var az=0,ax=aA.length;az<ax;az++){aA[az]=parseInt(aA[az],10);if(aA[az]>ay[az]){aA[az]=ay[az];}if(aA[az]<aB[az]){aA[az]=aB[az];}}}function h(aD,aC,aE,aG){var aF=aG["minYear"],aA=aG["maxYear"];if(aF!==-1){var aB=aG["minMonth"],ay=aG["minDay"];if(aD<aF){return[aF,aB,ay];}else{if(aD===aF){if(aC<aB){return[aF,aB,ay];}else{if(aC===aB&&aE<ay){return[aF,aB,ay];}}}}}if(aA!==-1){var ax=aG["maxMonth"],az=aG["maxDay"];if(aD>aA){return[aA,ax,az];}else{if(aD===aA){if(aC>ax){return[aA,ax,az];}else{if(aC===ax&&aE>az){return[aA,ax,az];}}}}}return[aD,aC,aE];}function H(ax){H._superClass.call(this,{parentElement:ax["parentElement"],row:3,col:5,dateType:"year",cls:"eui-calendar-year",initnames:["startYear","endYear","minYear","maxYear","value"],value:ax["value"],disabled:ax["disabled"]});var ay=this._property;if(ay["value"]===-1){a(ay,(new Date()).getFullYear()-7,ay["datecells"]);}}EUI.extendClass(H,o,"Almanac");H.prototype.setValue=function(aE){var aH=this._property,aD=aE===""||aE===false;if(aD||aE==null){aE=new Date().getFullYear();}else{aE=parseInt(aE,10);if(isNaN(aE)){return;}if(aE<o.YEAR_MIN){if(aE<0||aE>14){return;}aE+=aH["startYear"];}}var aF=aH["value"],az=-1,aI=null,ax=arguments[1]===true;if(aF!==aE){var aC=aH["datecells"],aB=aH["startYear"],aJ=null,aG=null,aA=null,ay=true;if(aB>aE){aG=aH["minYear"];if(aG!==-1&&aG>aE){if(aB<=aG){if(aF===aG){if(ax){e(aH["checkedcell"],this,ax);}return;}ay=false;}else{if((aB=aB-15)>aE){aB=Math.max(aG,aE-7);}}aE=aG;}else{if((aB=aB-15)>aE){aB=aE-7;}}}else{if((aJ=aH["endYear"])<aE){aA=aH["maxYear"];if(aA!==-1&&aA<aE){if(aJ>=aA){if(aF===aA){if(ax){e(aH["checkedcell"],this,ax);}return;}ay=false;}else{if((aB=aB+15)<aE-14){aB=Math.min(aA-14,aE-7);}}aE=aA;}else{if((aB=aB+15)<aE-14){aB=aE-7;}}}else{aG=aH["minYear"];if(aG>aE){aE=aG;}else{aA=aH["maxYear"];if(aA!==-1&&aA<aE){aE=aA;}}ay=false;}}if(ay){a(aH,aB,aC);}if(!aD){aI=aC[(az=aE)-aB];}}else{if(!aD){if(ax){e(aH["checkedcell"],this,ax);}return;}}aH["value"]=az;e(aI,this,ax);};H.prototype.next=function(){var ay=this._property,ax=ay["value"];if(ax===-1){a(ay,ay["startYear"]+15,ay["datecells"]);}else{this.setValue(ax+15);}};H.prototype.nextYear=H.prototype.next;H.prototype.previous=function(){var ay=this._property,ax=ay["value"];if(ax===-1){a(ay,ay["startYear"]-15,ay["datecells"]);}else{this.setValue(ax-15);}};H.prototype.previousYear=H.prototype.previous;H.prototype.setDatePeriod=function(aE,az){var aF=this._property;if(aE===false){aF["minYear"]=-1;}else{var ax=d.exec(aE);if(ax&&!isNaN(aE=parseInt(parseInt(ax[1],10)))&&aE>=o.YEAR_MIN){aF["minYear"]=aE;}}if(az===false){aF["maxYear"]=-1;}else{var ax=d.exec(az);if(ax&&!isNaN(az=parseInt(ax[1],10))&&az>=o.YEAR_MIN){aF["maxYear"]=az;}}var ay=aF["maxYear"],aD=aF["minYear"];var aC=aF["value"],aG=null;if(aD!==-1){if(ay!==-1&&ay<aD){ay=aF["maxYear"]=aD;}if(aD>aC){aG=aD;}}if(ay!==-1&&ay<aC){aG=ay;}var aB=aF["startYear"];if(aG!==null){if(aG>=aB&&aG<=aF["endYear"]){aF["value"]=aG;var aA=aF["datecells"];e(aA[aG-aB],this);ap(aA,aD-aB,ay-aB,aF);}else{this.setValue(aG);}}else{ap(aF["datecells"],aD-aB,ay-aB,aF);}H._superClass.prototype.setDatePeriod.call(this,aD===-1?false:aD,ay===-1?false:ay);};H.prototype.getDefaultValue=function(){return EUI.formatDate(new Date(),"yyyy");};function ah(ax){ah._superClass.call(this,{parentElement:ax["parentElement"],row:2,col:2,cls:"eui-calendar-quarter",dateType:"quarter",initnames:["minYear","minQuarter","maxYear","maxQuarter","quarter"],value:ax["value"],disabled:ax["disabled"]});var aA=this._property,az=aA["datecells"];for(var ay=0;ay<4;ay++){EUI.setTextContent(az[ay],w[ay]);}if(!aA["value"]){EUI.setTextContent(aA["leftTextcell"],(aA["year"]=(new Date()).getFullYear())+" 年");}if(arguments[2]!==false){aA["_evt_on_mouse"]=A;}}EUI.extendClass(ah,o,"Quarter");ah.prototype.setValue=function(ax){X.call(this,ax,"minQuarter","maxQuarter","quarter",4,arguments[1]===true);};ah.prototype.next=function(){var ay=this._property,ax=ay["year"]+1;if(!ay["value"]){v(ay,ax,"minQuarter","maxQuarter");}else{this.setValue(ax);}};ah.prototype.nextYear=ah.prototype.next;ah.prototype.previous=function(){var ay=this._property,ax=ay["year"]-1;if(!ay["value"]){v(ay,ax,"minQuarter","maxQuarter");}else{this.setValue(ax);}};ah.prototype.previousYear=ah.prototype.previous;ah.prototype.setDatePeriod=function(ax,ay){K.call(this,ax,ay,"minQuarter","maxQuarter","quarter",4);};ah.prototype.getYear=function(){return this._property["year"];};ah.prototype.getQuarter=function(){return this._property["quarter"];};ah.prototype.getDefaultValue=function(){var ax=new Date();return ax.getFullYear()+""+Math.floor(ax.getMonth()/3+1);};function i(ax){i._superClass.call(this,{parentElement:ax["parentElement"],row:2,col:6,cls:"eui-calendar-month",dateType:"month",initnames:["minYear","minMonth","maxYear","maxMonth","month"],value:ax["value"],disabled:ax["disabled"]});var aA=this._property,az=aA["datecells"];for(var ay=0;ay<12;ay++){EUI.setTextContent(az[ay],u[ay]);}if(!aA["value"]){EUI.setTextContent(aA["leftTextcell"],(aA["year"]=(new Date()).getFullYear())+" 年");}if(arguments[2]!==false){aA["_evt_on_mouse"]=A;}}EUI.extendClass(i,o,"Menology");i.prototype.setValue=function(ax){X.call(this,ax,"minMonth","maxMonth","month",12,arguments[1]===true);};i.prototype.next=function(){var ay=this._property,ax=ay["year"]+1;if(!ay["value"]){v(ay,ax,"minMonth","maxMonth");}else{this.setValue(ax);}};i.prototype.nextYear=i.prototype.next;i.prototype.previous=function(){var ay=this._property,ax=ay["year"]-1;if(!ay["value"]){v(ay,ax,"minMonth","maxMonth");}else{this.setValue(ax);}};i.prototype.previousYear=i.prototype.previous;i.prototype.getYear=function(){return this._property["year"];};i.prototype.getMonth=function(){return this._property["month"];};i.prototype.setDatePeriod=function(ax,ay){K.call(this,ax,ay,"minMonth","maxMonth","month",12);};i.prototype.getDefaultValue=function(){return EUI.formatDate(new Date(),"yyyyMM");};function D(aC){D._superClass.call(this,{parentElement:aC["parentElement"],row:6,col:7,dateType:"date",initnames:["minYear","minMonth","minDay","maxYear","maxMonth","maxDay","day","time"],value:aC["value"],disabled:aC["disabled"]});this._property["enabletime"]=EUI.parseBool(aC["enabletime"],false);var aE=this._property;var ay=aE["container"].firstChild.lastChild.firstChild,aB=ay.appendChild(this.doc.createElement("thead"));var aA=aB.insertRow(-1);for(var aD=0;aD<7;aD++){var ax=aA.appendChild(this.doc.createElement("th"));ax.className="calendar-week-cell";EUI.setTextContent(ax,s[aD]);}if(!aE["value"]){var az=new Date();aE["dateidx"]=av(aE["datecells"],az.getFullYear(),az.getMonth()+1,aE);}if(aE["enabletime"]){this.enableTime(true);}if(arguments[2]!==false){aE["_evt_on_mouse"]=A;}}EUI.extendClass(D,o,"Calendar");D.prototype.setValue=function(aI){if(EUI.browser.isMobile&&!aI){return;}var aC=this._property,az=aC["datecells"],aO=null,aR=false,aN=false;var aB=null,aG=null,aQ=null,aD=null;function aK(aS){var aT=aS.match(y);if(aT){aT=aT.slice(1);f(aT);aB=aT[0],aG=aT[1],aQ=aT[2];aD=l(aB,aG,aQ);}else{var aU=new Date();aB=aU.getHours(),aG=aU.getMinutes(),aQ=aU.getSeconds();aD=l(aB,aG,aQ);}}if(arguments.length<=1&&((!aI&&aI!==0)||aI.match)){if(aC["enabletime"]){if(aI){var ay=aI.split(" "),aH="";if(ay.length==2){aI=ay[0],aH=ay[1];aK.call(this,aH);}}}if(aI){var aJ=aI.match(d);if(aJ){aN=aJ[3]===undefined&&!aC["value"];aO=ag(parseInt(aJ[1],10),parseInt(aJ[2],10),parseInt(aJ[3],10),aC);}else{aO=ag(aC["year"],aC["month"],aC["day"],aC);}if(aC["enabletime"]){var aA=aI.match(y)?aI:aC["time"];if(aA&&aA.split){aK.call(this,aA);}}}else{aN=aI===false||aI==="";aO=new Date();if(aC["enabletime"]){aB=aO.getHours(),aG=aO.getMinutes(),aQ=aO.getSeconds();aD=l(aB,aG,aQ);}aO=h(aO.getFullYear(),aO.getMonth()+1,aO.getDate(),aC);}}else{var aE=parseInt(aI,10);if(!isNaN(aE)&&aE>=0&&aE<az.length){aO=new Date(aC["year"],aC["month"]-1,aE-aC["dateidx"]);aO=h(aO.getFullYear(),aO.getMonth()+1,aO.getDate(),aC);aR=arguments[1]===true;if(aC["enabletime"]){aK(aC["time"]);}}else{var aP=parseInt(arguments[1],10),aM=parseInt(arguments[2],10);aO=ag(isNaN(aE)||aE<1?aC["year"]:aE,aP,aM,aC);if(aC["enabletime"]){aK(aC["time"]);}}}var aE=aO[0],aP=aO[1],aM=aO[2];if(aC["year"]===aE&&aC["month"]===aP){if(aN){if(aC["day"]!==-1){aC["day"]=-1;e(null,this,aR);}return;}if(aC["day"]===aM){if(aR){if(EUI.browser.isMobile){e(aC["checkedendcell"],this,aR,aC["value"]);}else{e(aC["checkedcell"],this,aR);}}if(aC["enabletime"]&&aC["time"]===aD){return;}}}else{aC["dateidx"]=av(az,aE,aP,aC,this);}var aF=null,ax=null;if(aN){aC["day"]=-1;aC["time"]=-1;}else{aF=ar(aE,aP,(aC["day"]=aM));ax=az[aC["dateidx"]+aM];}aC["value"]=aF;if(aC["enabletime"]){var aL=new Date();aB=aB==null?aL.getHours():aB;aG=aG==null?aL.getMinutes():aG;aQ=aQ==null?aL.getSeconds():aQ;aD=l(aB,aG,aQ);aC["time"]=aD;aC["value"]=aF+" "+aD;}e(ax,this,aR,aC["value"]);if(EUI.browser.isMobile){if(aC["_hovertype_"]==0){x(az,aE,aP,aC,this);}}};D.prototype.next=function(){var ay=this._property,az=ay["month"]+1,ax=ay["year"];if(az===13){ax=ax+1;az=1;}if(!ay["value"]){ay["dateidx"]=av(ay["datecells"],ax,az,ay);}else{this.setValue(ax,az);}};D.prototype.nextYear=function(){var ay=this._property,az=ay["month"],ax=ay["year"]+1;if(!ay["value"]){ay["dateidx"]=av(ay["datecells"],ax,az,ay);}else{this.setValue(ax,az);}};D.prototype.previousYear=function(){var ay=this._property,az=ay["month"],ax=ay["year"]-1;if(!ay["value"]){ay["dateidx"]=av(ay["datecells"],ax,az,ay);}else{this.setValue(ax,az);}};D.prototype.previous=function(){var ay=this._property,az=ay["month"]-1,ax=ay["year"];if(az===0){ax=ax-1;az=12;}if(!ay["value"]){ay["dateidx"]=av(ay["datecells"],ax,az,ay);}else{this.setValue(ax,az);}};D.prototype.getYear=function(){return this._property["year"];};D.prototype.getMonth=function(){return this._property["month"];};D.prototype.getDay=function(){return this._property["day"];};D.prototype.getTime=function(){return this._property["time"];};D.prototype.getDefaultValue=function(){if(this._property["enabletime"]){return EUI.formatDate(new Date(),"yyyyMMdd HH:mm:ss");}return EUI.formatDate(new Date(),"yyyyMMdd");};D.prototype.setDatePeriod=function(aA,ax){var aK=this._property;ae(aA,aK,"min");ae(ax,aK,"max");var aJ=aK["minYear"],aD=aK["maxYear"],aF=aK["minMonth"],az=aK["maxMonth"],aB=aK["minDay"],aC=aK["maxDay"];if(aJ!==-1&&aD!==-1){if(aD<aJ){aD=aK["maxYear"]=aJ;}if(aD===aJ){if(az<aF){az=aK["maxMonth"]=aF;}if(az===aF&&aC<aB){aC=aK["maxDay"]=aB;}}}D._superClass.prototype.setDatePeriod.call(this,aJ===-1?false:ar(aJ,aF,aB),aD===-1?false:ar(aD,az,aC));var aH=aK["year"],aG=aK["month"],aI=aK["day"],ay=-1,aE=-1;if(aD!==-1){if(aH>aD){return S(aK,aD,az,aC,this);}else{if(aH===aD){if(aG>az){return S(aK,aD,az,aC,this);}else{if(aG===az){if(aI>aC){S(aK,aD,az,aC,this);aJ=-1;}aE=aK["dateidx"]+aC;}}}}}if(aJ!==-1){if(aH<aJ){S(aK,aJ,aF,aB,this);}else{if(aH===aJ){if(aG<aF){S(aK,aJ,aF,aB,this);}else{if(aG===aF){if(aI<aB){S(aK,aJ,aF,aB,this);}ay=aK["dateidx"]+aB;}}}}}ap(aK["datecells"],ay,aE,aK);};var j={},Q={Calendar:{cls:i,zIndex:100000},Menology:{cls:H,zIndex:100001},Timer:{cls:G,zIndex:100002}},aj={};aj["Calendar"]=function(ay){var ax=ay.getMonth();return ar(ay.getYear(),ax);};aj["Menology"]=function(ax){return ax.getYear();};aj["Timer"]=function(ax){return ax.getTime();};var U=[],W=null;function aa(){for(var ax in j){var ay=j[ax];ay.getContainer()._sancomponent=null;ay.dispose();}}function O(){U.length=0;EUI.attacheEvent4TopIframes("remove","mousedown",R);}function R(ay){var ax=U.length-1;if(ay&&ax!==-1){var aA=ay.target||ay.srcElement;while(aA){if(EUI.hasClassName(aA,"eui-calendar-container")){if(U[ax].getContainer()===aA){return false;}}aA=aA.parentNode;}var aB=U[ax];if(aB&&aB.isTimer&&aB.isVisible()){var az=U[0]._property.timeBtn;if(az){az.innerHTML=N;az.setAttribute("timetype","");}g(aB._property["value"],aB,aB._property["args4click"]);return false;}}C(U,ax);O();}function C(aA,ax){for(var ay=1;ay<=ax;ay++){var az=aA[ay];az.getContainer().style.cssText+="; left: -99999px; top: -99999px;";if(az.isTimer){aA[0]._property.timeBtn.innerHTML=N;}}}function g(ay,az,aA){az.getContainer().style.cssText+="; left: -99999px; top: -99999px;";U.pop();var ax=U.length-1;U[ax].setValue(ay);if(ax===0){O();}}function t(aF,aE){var aH=aF._className,ay=false;if(aF._property.leftTextcell===aE||aH==="Quarter"){aH="Menology";}if(aF._property.timeBtn===aE){aH="Timer";ay=true;}var aA=j[aH];if(ay){if(aA&&aA.isVisible()){aE.innerHTML=N;aE.setAttribute("timetype","");g(aA._property["value"],aA,aA._property["args4click"]);return;}aE.setAttribute("timetype","date");aE.innerHTML=B;}if(!aA){var aB=Q[aH];aA=j[aH]=new aB["cls"]({parentElement:aF.doc.body,value:false});var aD=aF._property.mousedown_evt;if(aD){aA.setMousedownEvt(aD);}if(aH!=="Timer"){aA.setOnClick(g);}aA.getContainer().style.cssText+="; position: absolute; z-index: "+aB["zIndex"];}var aG=U.length-1;if(aG>0){if(!EUI.isChildNode(U[aG].getContainer(),aE,3)){C(U,aG);aG=U.length=0;}}else{EUI.attacheEvent4TopIframes("add","mousedown",R);aG=0;}if(aG===0){U.push(aF);W={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE};}var az=U[aG].getContainer(),aJ=az.getBoundingClientRect();var aK=W["right"]=Math.max(W["right"],aJ["right"]),aC=W["left"]=Math.min(W["left"],aJ["left"]),aI=W["top"]=Math.min(W["top"],aJ["top"]),ax=W["bottom"]=Math.max(W["bottom"],aJ["bottom"]);az=aA.getContainer();az.style.cssText+="; left: "+aC+"px; top: "+aI+"px;";az._sancomponent=EUI.getEComponentByDom(aE);aA.setValue(aj[aH](aF));aA.setDatePeriod.apply(aA,aF.getDatePeriod());U.push(aA);}function A(az,ax,aB,ay){if(EUI.browser.isMobile){return;}var aA=aB._property;if(az===null){if(ax===aA["leftTextcell"]){return 5;}else{if(ax===aA["rightTextcell"]){return 6;}}}else{if(ax===null){if(az===5){t(aB,ax=aA["leftTextcell"]);return -1;}else{if(az===6){t(aB,ax=aA["rightTextcell"]);return -1;}else{if(az===9){t(aB,ax=aA["timeBtn"]);return -1;}}}}}}function G(ay){G._superClass.call(this,{parentElement:ay["parentElement"],dateType:"time",initnames:["hour","minute","second"],value:ay["value"],disabled:ay["disabled"]});var aA=this._property,az=aA["datecells"];EUI.setTextContent(aA["leftTextcell"],"选择时间");if(!aA["value"]){var ax=new Date();aA["hour"]=ax.getHours();aA["minute"]=ax.getMinutes();aA["second"]=ax.getSeconds();}}EUI.extendClass(G,o,"Timer");G.prototype.isTimer=true;G.prototype.setValue=function(aG){var aF=(aG===null)||(aG==="")||(aG===false)||(aG===undefined);var aH=this._property,aE=aH["datecells"],aA=arguments[1]===true;var aB=[null,null,null];if(aF){aH["hour"]="00";aH["minute"]="00";aH["second"]="00";}else{if(EUI.isString(aG)){var ay=aG.match(y);if(!ay){return;}var aD=parseInt(ay[1],10);aH["hour"]=aD=Math.min(23,Math.max(0,aD));var aC=parseInt(ay[2],10);aH["minute"]=aC=Math.min(59,Math.max(0,aC));var az=parseInt(ay[3],10);aH["second"]=az=Math.min(59,Math.max(0,az));aB=[aE[aD],aE[aC+24],aE[az+24+60]];}else{aG=parseInt(aG,10);if(isNaN(aG)){return;}var ax="";if(aG<24){aH["hour"]=aG;}else{if(aG>=24&&aG<84){aH["minute"]=aG-24;}else{aH["second"]=aG-24-60;}}aB=[aE[aH["hour"]],aE[aH["minute"]+24],aE[aH["second"]+24+60]];}}var ax=l(aH["hour"],aH["minute"],aH["second"]);aH["value"]=ax;e(aB,this,aA);};G.prototype.getDefaultValue=function(){return EUI.formatDate(new Date(),"HH:mm:ss");};G.prototype.isVisible=function(){var ax=this.getBaseDom();return ax.style.left!=="-99999px";};function ad(ay){var az=null,aA=null,ax=ay["parentElement"];if(ax){if(EUI.isString(ax)){az=window,aA=document;ax=aA.getElement(ax)||aA.body;}else{if(ax.nodeType===1){aA=ax.ownerDocument,az=aA.parentWindow||aA.defaultView;}}}if(az===null){az=window,aA=document,ax=aA.body;}ay.wnd=az;ay.parentElement=ax;ay.width=ay["width"];ay.floatwidth=272;ay.floatheight=336;this.mousedown_evt=ay.mousedown_evt;J.call(this,ay);this.notAutoChange=true;this.readOnly(true);this.setValue(ay["value"]);this.setOnChange(ay["onchange"]);this.setOnFirstDropDown(ac);this.setBeforeShowDropDownList(M);this.setAfterCancelDropDownList(b);}EUI.extendClass(ad,J,"AlmanacCombobox");ad.prototype.dispose=function(){if(this.calendar){this.calendar.dispose();this.calendar=null;}ad._superClass.prototype.dispose.call(this);};ad.prototype.enableClear=function(ax){this.enableclear=ax;};ad.prototype.clear=function(){ad._superClass.prototype.setValue.call(this,"");this.setCaption("");};ad.prototype._doconmousedown=function(ay){var ax=R(ay);if(ax===false){return;}ad._superClass.prototype._doconmousedown.call(this,ay);};ad.prototype.__adjustDropdownListBounds=function(){if(EUI.browser.isMobile){var aF=this.getDropDownFloatDiv(),aI=aF.getBaseDom();EUI.addClassName(aI,"eui-mobile");aI.style.cssText+=";top:auto;left:auto;bottom:0px;width:100% !important;";return;}var aH=this.cbar,aB=aH.getBoundingClientRect();var aC=this._floatdivwidth,aJ=this._floatdivheight;var aD=this.doc.body,ay=aD.clientHeight,aG=aD.scrollTop;var ax=aB.bottom,aE=aB.top,aA=ay+aG-ax-5;if(aJ>aA){if(aE-aG>=aJ){ax=aE-aJ;}else{ax=ax+aA-aJ;}}var az=Math.min(aD.clientWidth+aD.scrollLeft-aC,aB.left);this.getDropDownFloatDiv().setBounds(az,ax,aC,aJ);};ad.prototype.setDatePeriod=function(ax,ay){if(this.calendar){this.calendar.setDatePeriod(ax,ay);}this.minDate=ax;this.maxDate=ay;};ad.prototype.showDropDownList=function(ax){ad._superClass.prototype.showDropDownList.call(this,ax);if(!ax){C(U,U.length-1);}};ad.prototype.getCalendar=function(){return this.calendar;};var au={TimerCombobox:G,AlmanacCombobox:H,QuarterCombobox:ah,MenologyCombobox:i,CalendarCombobox:D};ad.attachCalendar=function(ax,ay){if(!ax||!ay){return;}au[ax]=ay;};function ac(az,ay){ay.setResize(false);var aA=this.calendar=new (au[az._className]||o)({parentElement:ay.getDom(),value:false});aA.setMousedownEvt(az.mousedown_evt);aA.setFooterVisible(true);aA.enableClear(EUI.parseBool(this.enableclear,true));aA.setOnClear(at,az);aA.setOnClick(m,az);aA.setDatePeriod(this.minDate,this.maxDate);if(this.enabletime){aA.enableTime(true);}var ax=aA.getContainer();ax.style.width="100%";az._floatdivwidth=ax.offsetWidth+5;az._floatdivheight=ax.offsetHeight+5;}function at(az,ax){if(az._property._hovertype_!==7){return;}var ay=az._property;EUI.removeClassName(ay.checkedcell,"eui-calendar-checked");ay.checkedcell=null;ax.setValue("",true);ax.showDropDownList(false);ax.processOnChange();}function m(ay,az,ax){if(az._property._hovertype_!==8){return;}ax.setValue(ay,true);ax.showDropDownList(false);ax.processOnChange();}function M(ax){var az=ax.getValue();if(!EUI.browser.isMobile&&az===""){az=ax.calendar.getDefaultValue();}if(EUI.browser.isMobile){ax.calendar.setFooterVisible(false);ax.calendar._property.contentMain.style.width="100%";ax.calendar._property.contentTable.style.width="100%";var ay=az.split("-");ay[0]=ay[0]||"";ay[1]=ay[1]||"";ax.calendar.setValue(ay[0]);ax.calendar.setValue(ay[1]);}else{ax.calendar.setValue(az);}}function b(ax){var aA=ax.getValue(),az=ax.calendar._property,ay=az.value;if(aA!=ay){EUI.removeClassName(az.checkedcell,"eui-calendar-checked");az.checkedcell=null;}}function q(aF,aB,aA,aD){var aG=null,aE=null,ay=null;if(aF==null){var az=new Date(),aC=12/aB;aE=az.getFullYear();ay=az.getMonth();if(aC!==1){ay=Math.ceil(ay/aC);}}else{if(aF.match){var ax=aF.match(d);if(ax){aE=parseInt(ax[1],10);if(aE>=o.YEAR_MIN){ay=ax[2];if(ay){ay=parseInt(ay,10);if(ay<1||ay>aB){ay=1;}}}}}}if(ay){aG=I18N.getString(aA,aD,[aE,ay]);aF=ar(aE,ay);}else{aG="";aF="";}this.setCaption(aG);ad.prototype.setValue.call(this,aF);}function V(ax){ax.floatBasecss=ax.floatBasecss||"eui-panel-almanac";ax.baseCss=ax.baseCss||"eui-form-almanac";ax.placeholder=ax.placeholder||I18N.getString("eui.modules.ealmanac.js.almanaccombobox.combobox_hint","请选择年份");V._superClass.call(this,ax);this.setMinHeight(148);}EUI.extendClass(V,ad,"AlmanacCombobox");V.prototype.setValue=function(ax){if(ax!==""&&(ax==null||isNaN(ax=parseInt(ax,10))||ax<o.YEAR_MIN)){ax=new Date().getFullYear();}this.setCaption(ax?(ax+"年"):"");V._superClass.prototype.setValue.call(this,ax);};function al(ax){ax.floatBasecss=ax.floatBasecss||"eui-panel-quarter";ax.baseCss=ax.baseCss||"eui-form-quarter";ax.placeholder=ax.placeholder||I18N.getString("eui.modules.ealmanac.js.quartercombobox.combobox_hint","请选择年季");V._superClass.call(this,ax);this.setMinHeight(123);}EUI.extendClass(al,ad,"QuarterCombobox");al.prototype.setValue=function(ax){return q.call(this,ax,4,"XUI.COMMON.YEARQUARTER","{0}年{1}季度");};function r(ax){ax.floatBasecss=ax.floatBasecss||"eui-panel-month";ax.baseCss=ax.baseCss||"eui-form-month";ax.placeholder=ax.placeholder||I18N.getString("eui.modules.ealmanac.js.menologycombobox.combobox_hint","请选择年月");r._superClass.call(this,ax);this.setMinHeight(123);}EUI.extendClass(r,ad,"MenologyCombobox");r.prototype.setValue=function(ax){return q.call(this,ax,12,"XUI.COMMON.YEARMONTH","{0}年{1}月");};function Z(ax){ax.floatBasecss=ax.floatBasecss||"eui-panel-date";ax.baseCss=ax.baseCss||"eui-form-date";this.enabletime=EUI.parseBool(ax["enabletime"],false);ax.placeholder=ax.placeholder||I18N.getString("eui.modules.ealmanac.js.datepickercombobox.combobox_hint","请选择日期");Z._superClass.call(this,ax);this.setMinHeight(245);}EUI.extendClass(Z,ad,"CalendarCombobox");Z.prototype.enableTime=function(ax){this.enabletime=EUI.parseBool(ax,false);if(this.calendar){this.calendar.enableTime(this.enabletime);}};Z.prototype.setValue=function(aF){var az=null,aH=null,aA=null,ay=null;if(aF==null){az=new Date();if(this.enabletime){ay=[az.getHours(),az.getMinutes(),az.getSeconds()];}az=h(az.getFullYear(),az.getMonth()+1,az.getDate(),{});}else{if(aF&&aF.match){if(this.enabletime){var aG=aF.split(" "),aB="";if(aG.length==2){aF=aG[0],aB=aG[1];ay=aB.split(":");}else{if(aG.length==1){if(aF.match(y)){aB=aF;ay=aB.split(":");aF="";}}}az=new Date();if(!ay){ay=[az.getHours(),az.getMinutes(),az.getSeconds()];}if(!aF){aF=az.toLocaleDateString();}}var ax=aF.match(d);if(!ax){return;}az=ag(parseInt(ax[1],10),parseInt(ax[2],10)||1,parseInt(ax[3],10)||1,{});}else{aH="";aA="";}}if(az){var aD=az[0],aC=az[1],aE=az[2];aH=aD+"年"+aC+"月"+aE+"日";aA=ar(aD,aC,aE);if(this.enabletime){aH+=" "+ay[0]+"时"+ay[1]+"分"+ay[2]+"秒";ay=l(ay[0],ay[1],ay[2]);aA+=" "+ay;}}this.setCaption(aH);Z._superClass.prototype.setValue.call(this,aA);};function ao(ax){ax.floatBasecss=ax.floatBasecss||"eui-panel-timer";ax.baseCss=ax.baseCss||"eui-form-timer";ax.placeholder=ax.placeholder||I18N.getString("eui.modules.ealmanac.js.timercombobox.combobox_hint","请选择时间");ao._superClass.call(this,ax);this.setMinHeight(123);}EUI.extendClass(ao,ad,"TimerCombobox");ao.prototype.setValue=function(aC){var aE="",ay="";if(aC==null){var aA=new Date();var ax=aA.getHours();var aD=aA.getMinutes();var az=aA.getSeconds();aE=l(ax,aD,az);ay=ax+"时"+aD+"分"+az+"秒";}else{if(aC&&aC.match){var aB=aC.match(y);if(!aB){return;}var ax=parseInt(aB[1],10);ax=Math.min(23,Math.max(0,ax));var aD=parseInt(aB[2],10);aD=Math.min(59,Math.max(0,aD));var az=parseInt(aB[3],10);az=Math.min(59,Math.max(0,az));aE=l(ax,aD,az);ay=ax+"时"+aD+"分"+az+"秒";}else{ay="";aE="";}}this.setCaption(ay);ad.prototype.setValue.call(this,aE);};function I(ay){var az=null,aA=null,ax=ay["parentElement"];if(ax){if(EUI.isString(ax)){az=window,aA=document;ax=aA.getElement(ax)||aA.body;}else{if(ax.nodeType===1){aA=ax.ownerDocument,az=aA.parentWindow||aA.defaultView;}}}if(az===null){az=window,aA=document,ax=aA.body;}ay.wnd=az;ay.parentElement=ax;ay.baseCss=ay.baseCss||"eui-form-sedate";ay.width=ay["width"];ay.floatwidth=549;ay.floatheight=336;ay.placeholder=ay.placeholder||I18N.getString("eui.modules.ealmanac.js.esedatecombobox.combobox_hint","请选择范围");J.call(this,ay);this.type=ay["type"];this.enabletime=EUI.parseBool(ay["enabletime"],false);this.isTimeOpen=(this.type=="date")&&this.enabletime;this.setValue(ay["value"]);this.setOnChange(ay["onchange"]);this.notAutoChange=true;this.readOnly(true);this.setOnFirstDropDown(p);this.setBeforeShowDropDownList(this._beforeshowdropdownlist);this.setAfterCancelDropDownList(k);}EUI.extendClass(I,J,"StartEndDateCombobox");var Y={"time":G,"year":H,"quarter":ah,"month":i,"date":D};I.prototype.dispose=function(){if(this.start_calendar){this.start_calendar.dispose();this.start_calendar=null;}if(this.end_calendar){this.end_calendar.dispose();this.end_calendar=null;}if(this.start_timer){this.start_timer.dispose();this.start_timer=null;}if(this.end_timer){this.end_timer.dispose();this.end_timer=null;}I._superClass.prototype.dispose.call(this);};I.prototype._doconmousedown=function(ay){var ax=R(ay);if(ax===false){return;}I._superClass.prototype._doconmousedown.call(this,ay);};I.prototype.__onOk=function(){var az=this.__getStartDate();var ay=this.__getEndDate();if(!this.__check2Date(az,ay)){return;}var aA="",ax="";if(az||ay){aA=az+"-"+ay;ax=this.__formCaption(az)+"-"+this.__formCaption(ay);}this.setCaption(ax);this.showDropDownList(false);this.value=aA;this.start_value=az;this.end_value=ay;if(this.isTimeOpen){this.start_time=az.split(" ")[1];this.end_time=ay.split(" ")[1];}this.processOnChange();};I.prototype.__check2Date=function(az,ay){az=az+"";ay=ay+"";var aC=(az.replace(/\s+/g,"")).replace(/[:]/g,"");var aB=(ay.replace(/\s+/g,"")).replace(/[:]/g,"");aC=parseInt(aC);aB=parseInt(aB);if(this.minDate&&this.maxDate){var aA=(this.minDate.replace(/\s+/g,"")).replace(/[:]/g,"");var ax=(this.maxDate.replace(/\s+/g,"")).replace(/[:]/g,"");aA=parseInt(aA);ax=parseInt(ax);if(aC<aA||aC>ax||aB<aA||aB>ax){EUI.showMessage(I18N.getString("eui.modules.ealmanac.js.esedatecombobox.out_of_range","时间超出有效日期"),I18N.getString("eui.modules.ealmanac.js.esscombobox.hint","提示"));return false;}}if(aC>aB&&az&&ay){EUI.showMessage(I18N.getString("eui.modules.ealmanac.js.esedatecombobox.start_not_end","起始日期不能大于结束日期"),"提示");return false;}return true;};I.prototype.__formCaption=function(aF){var aA=null,aH=null,az=null;if(!aF){return"";}if(aF.length>4){var aG=aF.split(" "),aB="";aF=aG[0],aB=aG[1];}if(this.type!="time"&&this.type!="year"){var ax=aF.match(d);var aD=parseInt(ax[1],10);var ay=parseInt(ax[2],10);var aC=parseInt(ax[2],10);var aE=parseInt(ax[3],10);}switch(this.type){case"time":if(aF.match(y)){az=aF.split(":");}aH=az[0]+"时"+az[1]+"分"+az[2]+"秒";break;case"year":aH=aF+"年";break;case"quarter":aH=I18N.getString("XUI.COMMON.YEARQUARTER","{0}年{1}季度",[aD,ay]);break;case"month":aH=aD+"年"+aC+"月";break;case"date":aH=aD+"年"+aC+"月"+aE+"日";if(this.enabletime){az=aB.split(":");aH+=" "+az[0]+"时"+az[1]+"分"+az[2]+"秒";}break;}return aH;};I.prototype.__adjustDropdownListBounds=function(){var aG=this.cbar,aB=aG.getBoundingClientRect();var aC=this._floatdivwidth,aH=this._floatdivheight;var aD=this.doc.body,ay=aD.clientHeight,aF=aD.scrollTop;var ax=aB.bottom,aE=aB.top,aA=ay+aF-ax-5;if(aH>aA){if(aE-aF>=aH){ax=aE-aH;}else{ax=ax+aA-aH;}}var az=Math.min(aD.clientWidth+aD.scrollLeft-aC,aB.left);this.getDropDownFloatDiv().setBounds(az,ax,aC,aH);};I.prototype.getValue=function(){return this.value;};I.prototype.setValue=function(aB){var aA="",az="";if(aB){var ay=aB.split("-");aA=ay[0];az=ay[1];}if(!this.__check2Date(aA,az)){this.value="";return;}this.start_value=aA;this.end_value=az;if(this.start_calendar&&this.end_calendar){this.start_calendar.setValue(aA);this.end_calendar.setValue(az);this.start_calendar.isNull=(!aA)?true:false;this.end_calendar.isNull=(!az)?true:false;}if(this.isTimeOpen){this.start_time=this.formTimeValue(aA);this.end_time=this.formTimeValue(az);if(this.start_calendar&&this.end_calendar){this.start_calendar.setValue(this.start_time);this.end_calendar.setValue(this.end_time);}}var ax="";if(aA||az){ax=this.__formCaption(aA)+"-"+this.__formCaption(az);}this.setCaption(ax);this.value=aB;};I.prototype.__getStartDate=function(){if(!this.start_calendar){return"";}if(this.start_calendar.isNull){return"";}var ax=this.start_calendar.getValue();if(this.isTimeOpen){ax+=" "+this.start_timer.getValue();}return ax;};I.prototype.__getEndDate=function(){if(!this.end_calendar){return"";}if(this.end_calendar.isNull){return"";}var ax=this.end_calendar.getValue();if(this.isTimeOpen){ax+=" "+this.end_timer.getValue();}return ax;};I.prototype.setDatePeriod=function(az,aA){var ay="",ax="";if(az){ay=az.split(" ")[0];}if(aA){ax=aA.split(" ")[0];}if(this.start_calendar){this.start_calendar.setDatePeriod(ay,ax);this.end_calendar.setDatePeriod(ay,ax);}this.minDate=az;this.maxDate=aA;};I.prototype.showDropDownList=function(ax){I._superClass.prototype.showDropDownList.call(this,ax);if(!ax){C(U,U.length-1);}};function p(aH,aB){aB.setResize(false);aB.setResize(false);if(!Y[aH.type]){return;}var aG=aH.floatDom=aB.getDom();var aE=[];aE.push('<div class="eui-calendar-container" style="width:549px;"">');aE.push('<div class="eui-calendar-main" style="width:549px;">');aE.push('<div class="eui-calendar-rowlist" > </div>');aE.push('<div class="eui-calendar-rowlist" > </div>');aE.push("</div>");aE.push('<div class="eui-calendar-footer" style="width:549px;">');aE.push('<div class="eui-btn-container">');aE.push('<button type="button" class="eui-btn eui-btn-m eui-btn-text eui-float-left eui-hide">'+N+"</button>");aE.push('<button type="button" class="eui-btn eui-btn-m eui-align-center eui-float-right">清除</button>');aE.push('<button type="button" class="eui-btn eui-btn-m eui-align-center eui-btn-primary eui-float-right">确定</button>');aE.push("</div></div></div>");aG.innerHTML=aE.join("");var ax=aG.firstChild.firstChild;var aK=ax.firstChild;var aA=ax.lastChild;var aF=aG.firstChild.lastChild.firstChild;var aD=aF.firstChild;var aJ=aD.nextSibling;var az=aJ.nextSibling;az.onclick=function(){aH.__onOk();};aJ.onclick=function(){aH.setValue("");aH.showDropDownList(false);};aH._enableTime(aD,aH.isTimeOpen);var aC=aH.start_calendar=new (Y[aH.type]||o)({parentElement:aK,value:aH.start_value});aC.setOnClick(ak,aH);var ay=aH.end_calendar=new (Y[aH.type]||o)({parentElement:aA,value:aH.end_value});ay.setOnClick(ak,aH);aH.setDatePeriod(aH.minDate,aH.maxDate);var aI=aH._property={floatdom:aG,calendarDom:ax,startDiv:aK,endDiv:aA,timeBtn:aD,clearBtn:aJ,sureBtn:az};}I.prototype._enableTime=function(ay,az){var ax=this;this.enabletime=az;this.isTimeOpen=(this.type=="date")&&this.enabletime;if(az){EUI.removeClassName(ay,"eui-hide");if(!ay.onclick){ay.istime=false;ay.onclick=function(){ax.__editTime();};this.start_timer=new Y["time"]({value:this.start_time});this.end_timer=new Y["time"]({value:this.end_time});}}else{EUI.addClassName(ay,"eui-hide");if(ay.onclick){if(ay.istime){this.__editTime();}ay.onclick=null;if(isTimeAdd){this._property.startDiv.removeChild(this.start_timer.getBaseDom());this._property.endDiv.removeChild(this.end_timer.getBaseDom());}this.start_timer.dispose();this.start_timer=null;this.start_time="";this.end_timer.dispose();this.end_timer=null;this.end_time="";this.isTimeAdd=false;}}};I.prototype.__editTime=function(){var ax=this;var az=this._property.startDiv,ay=this._property.endDiv,aA=this._property.timeBtn;if(this._property.timeBtn.istime){aA.istime=false;EUI.addClassName(this.start_timer.getBaseDom(),"eui-hide");EUI.addClassName(this.end_timer.getBaseDom(),"eui-hide");EUI.removeClassName(this.start_calendar.getBaseDom(),"eui-hide");EUI.removeClassName(this.end_calendar.getBaseDom(),"eui-hide");aA.innerHTML=N;return;}if(!this.isTimeAdd){this.isTimeAdd=true;az.appendChild(this.start_timer.getBaseDom());ay.appendChild(this.end_timer.getBaseDom());}aA.istime=true;EUI.removeClassName(this.start_timer.getBaseDom(),"eui-hide");EUI.removeClassName(this.end_timer.getBaseDom(),"eui-hide");EUI.addClassName(this.start_calendar.getBaseDom(),"eui-hide");EUI.addClassName(this.end_calendar.getBaseDom(),"eui-hide");aA.innerHTML=B;};I.prototype.formTimeValue=function(aE){if(!aE){return"";}var aF=aE.split(" "),aC="";if(aF.length==2){aE=aF[0],aC=aF[1];}var ax=aC.match(y);if(ax){ax=ax.slice(1);f(ax);var aB=ax[0],aA=ax[1],ay=ax[2];var az=l(aB,aA,ay);}else{var aD=new Date();var aB=aD.getHours(),aA=aD.getMinutes(),ay=aD.getSeconds();var az=l(aB,aA,ay);}return az;};I.prototype._beforeshowdropdownlist=function(){this.start_calendar.setValue(this.start_value);this.end_calendar.setValue(this.end_value);if(this.isTimeOpen){this.start_timer.setValue(this.start_time);this.end_timer.setValue(this.end_time);}};function k(ax){var aC=ax.start_value,aD=ax.end_value,aA=ax.start_calendar._property,az=ax.end_calendar._property,ay=aA.value,aB=az.value;if(aC!=ay||aD!=aB){EUI.removeClassName(aA.checkedcell,"eui-calendar-checked");EUI.removeClassName(az.checkedcell,"eui-calendar-checked");aA.checkedcell=null;az.checkedcell=null;}}function ak(ay,az,ax){az.isNull=false;}function L(ax){ax.floatBasecss=ax.floatBasecss||"eui-panel-date";ax.baseCss=ax.baseCss||"eui-form-date";this.enabletime=EUI.parseBool(ax["enabletime"],false);this.type=ax.type||"date";ax.placeholder=ax.placeholder||I18N.getString("eui.modules.ealmanac.js.estartenddatepickercombobox.combobox_hint","请选择日期");L._superClass.call(this,ax);this.setMinHeight(245);this.readOnly(true);}EUI.extendClass(L,ad,"CalendarCombobox");L.prototype.dispose=function(){this.start_value=null;this.end_value=null;this.minDate=null;this.maxDate=null;};L.prototype.enableTime=function(ax){this.enabletime=EUI.parseBool(ax,false);if(this.calendar){this.calendar.enableTime(this.enabletime);}};L.prototype.__check2Date=function(az,ay){az=az+"";ay=ay+"";var aC=(az.replace(/\s+/g,"")).replace(/[:]/g,"");var aB=(ay.replace(/\s+/g,"")).replace(/[:]/g,"");aC=parseInt(aC);aB=parseInt(aB);if(this.minDate&&this.maxDate){var aA=(this.minDate.replace(/\s+/g,"")).replace(/[:]/g,"");var ax=(this.maxDate.replace(/\s+/g,"")).replace(/[:]/g,"");aA=parseInt(aA);ax=parseInt(ax);if(aC<aA||aC>ax||aB<aA||aB>ax){EUI.showMessage(I18N.getString("eui.modules.ealmanac.js.esedatecombobox.out_of_range","时间超出有效日期"),I18N.getString("eui.modules.ealmanac.js.esscombobox.hint","提示"));return false;}}if(aC>aB&&az&&ay){EUI.showMessage(I18N.getString("eui.modules.ealmanac.js.esedatecombobox.start_not_end","起始日期不能大于结束日期"),"提示");return false;}return true;};L.prototype.setValue=function(aB){var aA="",az="";if(aB){var ay=aB.split("-");aA=ay[0];az=ay[1];}if(!this.__check2Date(aA,az)){this.value="";return;}this.start_value=aA;this.end_value=az;var ax="";if(aA||az){ax=this.__formCaption(aA)+"-"+this.__formCaption(az);}this.setCaption(ax);this.value=aB;aB=aB?aB:"";L._superClass.prototype.setValue.call(this,aB);};L.prototype.__formCaption=function(aF){var aA=null,aH=null,az=null;if(!aF){return"";}if(aF.length>4){var aG=aF.split(" "),aB="";aF=aG[0],aB=aG[1];}if(this.type!="time"&&this.type!="year"){var ax=aF.match(d);var aD=parseInt(ax[1],10);var ay=parseInt(ax[2],10);var aC=parseInt(ax[2],10);var aE=parseInt(ax[3],10);}switch(this.type){case"time":if(aF.match(y)){az=aF.split(":");}aH=az[0]+"时"+az[1]+"分"+az[2]+"秒";break;case"year":aH=aF+"年";break;case"quarter":aH=I18N.getString("XUI.COMMON.YEARQUARTER","{0}年{1}季度",[aD,ay]);break;case"month":aH=aD+"年"+aC+"月";break;case"date":aH=aD+"年"+aC+"月"+aE+"日";if(this.enabletime){az=aB.split(":");aH+=" "+az[0]+"时"+az[1]+"分"+az[2]+"秒";}break;}return aH;};L.prototype.showDropDownList=function(ax){L._superClass.prototype.showDropDownList.call(this,ax);if(!ax){C(U,U.length-1);}};L.prototype.clear=function(){this.setCaption("");this.setValue("");var ax=this.calendar._property;EUI.removeClassName(ax.checkedstartcell,"eui-calendar-checked-start");EUI.removeClassName(ax.checkedstartcell,"eui-calendar-checked-startcell");EUI.removeClassName(ax.checkedendcell,"eui-calendar-checked-end");ax.checkedstartcell=null;ax.checkedendcell=null;ab(false,this.calendar);};return{ETimer:G,EAlmanac:H,EQuarter:ah,EMenology:i,ECalendar:D,ETimerCombobox:ao,EAlmanacCombobox:V,EQuarterCombobox:al,EMenologyCombobox:r,ECalendarCombobox:Z,EStartEndDateCombobox:I,EStartEndDatePickerCombobox:L};});